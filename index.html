<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxury Transfers Riviera | VIP Transportation</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;800;900&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        /* ==========================================================================
           ESTILOS Y VARIABLES
           ========================================================================== */
        :root {
            --gold: #D4AF37;
            --gold-hover: #b5952f;
            --black: #0a0a0a;
            --dark-gray: #222;
            --white: #fff;
            
            --primary-blue: #003580; 
            --action-green: #00a651; 
            --action-green-hover: #008c44; 
            --highlight-yellow: #febb02; 
            --text-dark: #1a1a1a; 
            --bg-light: #f2f2f2; 
            --navy-bg: #002855;
            --light-gray: #f4f4f4;

            --font-hero: 'Montserrat', sans-serif;
            --font-title: 'Montserrat', sans-serif;
            --font-body: 'Open Sans', sans-serif;
            
            --header-height: 60px; 
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: var(--font-body);
            margin: 0; padding: 0; color: var(--dark-gray); background-color: var(--white);
            overflow-x: hidden;
        }

        a { text-decoration: none; color: inherit; transition: 0.3s; }

        /* HEADER */
        header {
            background-color: rgba(10, 10, 10, 0.95);
            padding: 10px 0;
            position: fixed; width: 100%; top: 0; z-index: 1000;
            border-bottom: 2px solid var(--gold);
            display: flex; align-items: center;
        }

        .nav-container {
            max-width: 1200px; margin: 0 auto; display: flex;
            justify-content: space-between; align-items: center; padding: 0 20px; width: 100%;
        }

        .logo {
            font-family: var(--font-title); font-size: 1.4rem; font-weight: 800; 
            text-transform: uppercase; letter-spacing: 1px; color: var(--gold); 
            display: flex; align-items: center; gap: 12px; cursor: pointer;
        }
        .logo-icon { height: 35px; width: auto; }
        
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links a { 
            color: var(--white); font-size: 0.85rem; text-transform: uppercase; 
            letter-spacing: 1px; font-weight: 700; cursor: pointer; font-family: var(--font-title);
        }
        .nav-links a:hover { color: var(--gold); }

        #seccion-calculadora, #servicios, #flota {
            scroll-margin-top: calc(var(--header-height) - 25px);
        }

        /* HERO SECTION */
        .hero {
            background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.4)), url('https://i.imgur.com/3JAl89S.jpeg');
            background-size: cover; background-position: center center; height: 100vh;
            display: flex; align-items: center; justify-content: center;
            text-align: center; color: var(--white); padding: 0 20px;
            position: relative; z-index: 1;
        }

        .hero-content {
            max-width: 900px; z-index: 10; margin-top: 60px;
            display: flex; flex-direction: column; align-items: center;
        }

        .hero-content h1 {
            order: 1; font-size: 3.5rem; margin-bottom: 20px; line-height: 1.1;
            font-weight: 900; text-transform: uppercase;
            text-shadow: 2px 2px 15px rgba(0,0,0,0.8); font-family: var(--font-title); letter-spacing: -1px;
        }

        .hero-content p {
            order: 2; font-size: 1.4rem; margin-bottom: 40px; font-weight: 400;
            text-shadow: 1px 1px 8px rgba(0,0,0,0.8); max-width: 800px; font-family: var(--font-body);
        }

        /* --- ESTILOS DEL BOT√ìN --- */
        .btn-cta {
            order: 3; 
            background-color: var(--gold); 
            color: var(--black); 
            padding: 18px 50px; border-radius: 50px; font-weight: 800; font-size: 1rem;
            text-transform: uppercase; letter-spacing: 2px; display: inline-block;
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4); border: 2px solid var(--gold);
            cursor: pointer; font-family: var(--font-title); transition: all 0.3s ease;
        }
        
        .btn-cta:hover { 
            background-color: var(--gold); 
            color: var(--white); 
            border-color: var(--gold); 
            transform: translateY(-3px); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        /* --- MEDIA QUERIES HERO (M√ìVIL) --- */
        @media (max-width: 768px) {
            header { padding: 15px 0; }
            .nav-container { flex-direction: column; gap: 15px; }
            .nav-links { gap: 20px; } .nav-links a { font-size: 0.8rem; }
            .logo { font-size: 1.2rem; letter-spacing: 0.5px; } .logo-icon { height: 30px; }

            .hero {
                background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.0)), url('https://imgur.com/qAxXmrB.jpg');
                background-position: center center;
                height: 100vh;
                align-items: flex-start;
            }

            .hero-content {
                height: 100vh; 
                width: 100%; 
                margin-top: 0; 
                padding-top: 100px;
                display: flex; 
                flex-direction: column;
                justify-content: flex-start; 
            }

            .hero-content h1 {
                order: 1; 
                font-size: 2.2rem; 
                margin-bottom: 10px; 
                white-space: normal; 
                text-shadow: 0 2px 15px rgba(0,0,0,0.9); 
                letter-spacing: 0;
                min-height: 5.5em; 
                display: block;
            }

            .hero-content p {
                order: 2;
                margin-top: 15px; 
                margin-bottom: 0; 
                font-size: 1.1rem;
                line-height: 1.4; 
                text-shadow: none; 
                background-color: rgba(0, 0, 0, 0.1); 
                padding: 15px; 
                border-radius: 15px;
                width: 90%; 
                box-sizing: border-box;
                align-self: center;
            }

            .btn-cta {
                order: 3; 
                margin-top: auto; 
                margin-bottom: 260px; 
                align-self: center; 
                width: 90%; 
                font-size: 1.1rem; 
                padding: 18px 0; 
            }
        }

        /* CALCULADORA */
        #seccion-calculadora { 
            position: relative; background-color: #f4f4f4; min-height: 100vh;
            display: flex; align-items: center; justify-content: center; flex-direction: column;
            padding: 30px 0 50px 0; z-index: 1;
        }
        
        .main-container-calc { position: relative; z-index: 10; width: 95%; max-width: 1100px; padding: 20px 0; }
        
        .title-calc { 
            color: var(--gold); text-align: center; font-size: 32px; margin-bottom: 25px;
            font-weight: 800; letter-spacing: -0.5px; text-transform: uppercase;
            line-height: 1.2; font-family: var(--font-title);
        }

        #calc-subtitle {
            font-size: 18px; font-weight: 400; text-transform: none; display: block;
            margin-top: 5px; color: #555; font-family: var(--font-body);
        }
        
        .search-box-container { 
            background-color: transparent; padding: 0; border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15); margin-bottom: 20px;
        }
        
        .search-box-inner { 
            background-color: #ffffff; padding: 30px; border-radius: 12px;
            color: var(--text-dark); border: 3px solid var(--gold);
        }
        
        .options-bar { display: flex; justify-content: space-between; margin-bottom: 20px; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .radio-group { display: flex; gap: 20px; }
        .radio-label { display: flex; align-items: center; cursor: pointer; font-size: 14px; font-weight: 700; color: var(--navy-bg); font-family: var(--font-title); } 
        .radio-label input { margin-right: 8px; accent-color: var(--navy-bg); width: 18px; height: 18px; }
        
        .direction-tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab-btn { 
            background: #fff; border: 1px solid #ccc; color: #555; padding: 12px 20px;
            border-radius: 50px; cursor: pointer; font-size: 13px; font-weight: 600;
            transition: 0.3s; display: flex; align-items: center; gap: 8px; flex: 1; justify-content: center; white-space: nowrap; font-family: var(--font-body);
        }
        .tab-btn.active { 
            background-color: var(--navy-bg) !important; color: #ffffff !important;
            border-color: var(--navy-bg) !important; font-weight: 800;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); transform: translateY(-2px);
        }
        .tab-btn:hover { background: #f0f0f0; }

        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; background: transparent; padding: 0; border: none; }
        
        .input-wrapper { 
            background: #fff; padding: 10px 15px; display: flex; flex-direction: column;
            justify-content: center; position: relative; border-radius: 8px;
            border: 1px solid #ccc; transition: 0.2s; 
        }
        .input-wrapper:focus-within { box-shadow: 0 0 0 2px rgba(0, 40, 85, 0.2); border-color: var(--navy-bg); }
        .input-wrapper label { font-size: 11px; color: var(--navy-bg); font-weight: 800; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; font-family: var(--font-title); }
        
        /* ESTILOS UNIFICADOS PARA TODOS LOS INPUTS (TEXTO, SELECT Y TIME) */
        .input-wrapper input, 
        .input-wrapper select, 
        .input-wrapper textarea { 
            border: none; 
            outline: none; 
            width: 100%; 
            font-size: 15px; 
            font-weight: 600; 
            color: #333; 
            background: transparent; 
            font-family: var(--font-body); 
            padding: 0; 
            /* Asegura que el selector de hora ocupe el espacio correcto */
            min-height: 25px; 
        }

        /* Ajuste espec√≠fico para que el input type="time" se vea bien en m√≥viles y desktop */
        input[type="time"] {
            font-family: 'Open Sans', sans-serif; /* Misma fuente que el resto */
            cursor: pointer;
        }

        .contact-section { grid-column: 1 / -1; display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; margin-top: 20px; border-top: 1px dashed #ddd; padding-top: 25px; }
        .flight-fields-container { grid-column: 1 / -1; display: contents; }
        
        .terms-container { grid-column: 1 / -1; display: flex; align-items: center; margin-top: 10px; font-size: 13px; color: #555; gap: 10px; justify-content: center; font-family: var(--font-body); }
        .terms-container input { width: 18px; height: 18px; accent-color: var(--navy-bg); cursor: pointer; }
        .terms-link { color: var(--navy-bg); text-decoration: underline; cursor: pointer; font-weight: 700; }

        .btn-cotizar { grid-column: 1 / -1; background-color: var(--action-green); color: white; font-size: 18px; font-weight: 800; border: none; padding: 18px; border-radius: 8px; cursor: pointer; margin-top: 15px; transition: all 0.2s; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 5px 0 #007a3d; width: 100%; font-family: var(--font-title); }
        .btn-cotizar:hover { background-color: var(--action-green-hover); transform: translateY(2px); box-shadow: 0 3px 0 #007a3d; }
        
        #resultados { margin-top: 30px; display: none; width: 100%; }
        .ruta-header { background: var(--navy-bg); color: white; padding: 15px 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-size: 16px; font-weight: 600; border-left: 5px solid var(--highlight-yellow); animation: fadeIn 0.5s ease-in-out; box-shadow: 0 4px 15px rgba(0,0,0,0.1); font-family: var(--font-body); }
        .ruta-header i { color: var(--highlight-yellow); margin: 0 10px; }

        /* TARJETAS RESULTADOS */
        .tarjeta { 
            background: var(--white); 
            border-radius: 16px; 
            padding: 25px; 
            margin-bottom: 25px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
            display: flex; 
            flex-wrap: wrap; 
            gap: 25px; 
            border: 1px solid var(--gold); 
            overflow: hidden; 
            animation: fadeIn 0.5s ease-in-out; 
            transition: transform 0.3s, box-shadow 0.3s; 
        }
        .tarjeta:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
        .tarjeta-img { flex: 0 0 220px; display: flex; align-items: center; justify-content: center; background: #fff; border-radius: 12px; padding: 10px; border: 1px solid #f5f5f5; }
        .tarjeta-img img { width: 100%; height: auto; object-fit: contain; max-height: 140px; }
        .tarjeta-info { flex: 1; display: flex; flex-direction: column; justify-content: center; min-width: 280px; }
        .tarjeta-info h3 { margin: 0 0 8px 0; font-size: 22px; color: var(--text-dark); text-transform: uppercase; letter-spacing: -0.5px; font-weight: 900; font-family: var(--font-title); }
        
        .tarjeta-route-display { 
            font-size: 12px; 
            color: var(--navy-bg); 
            font-weight: 700; 
            margin-bottom: 12px; 
            background: #f9f9f9; 
            padding: 10px 15px; 
            border-radius: 6px; 
            display: inline-block; 
            border: 1px solid #eee; 
            font-family: var(--font-body); 
        }
        
        .tarjeta-specs { margin-bottom: 15px; font-size: 14px; color: #555; display: flex; flex-direction: column; gap: 6px; font-weight: 500; font-family: var(--font-body); }
        .spec-row { display: flex; align-items: center; gap: 10px; }
        .spec-row i { color: var(--primary-blue); width: 20px; text-align: center; font-size: 16px; }
        .feature-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 5px; }
        .feature-tag { background: #f8fafc; color: #475569; font-size: 11px; padding: 6px 12px; border-radius: 20px; display: flex; align-items: center; gap: 6px; font-weight: 600; border: 1px solid #e2e8f0; font-family: var(--font-body); }
        .feature-tag i { color: var(--gold); font-size: 12px; }
        
        .tarjeta-price { flex: 0 0 180px; text-align: right; display: flex; flex-direction: column; justify-content: center; border-left: 2px solid #f5f5f5; padding-left: 25px; }
        .price-old { font-size: 14px; color: #bbb; text-decoration: line-through; margin-bottom: 2px; font-weight: 600; font-family: var(--font-body); display: block; }
        
        .price-current { 
            font-size: 32px; 
            font-weight: 900; 
            color: var(--navy-bg); 
            margin-bottom: 10px; 
            letter-spacing: -1px; 
            line-height: 1; 
            font-family: var(--font-title); 
            white-space: nowrap; 
        }
        
        .btn-reservar { background-color: var(--action-green); color: white; text-decoration: none; padding: 14px 20px; border-radius: 8px; font-weight: 800; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; margin-top: 5px; cursor: pointer; border:none; text-transform: uppercase; letter-spacing: 0.5px; width: 100%; box-shadow: 0 4px 6px rgba(0,166,81,0.3); font-family: var(--font-title); }
        .btn-reservar:hover { background-color: var(--action-green-hover); box-shadow: 0 8px 20px rgba(0,166,81,0.4); transform: translateY(-2px); }
        
        /* SECCI√ìN SERVICIOS */
        .section-wrapper { padding: 30px 20px 80px 20px; text-align: center; background-color: white; }
        .section-header { text-align: center; margin-bottom: 25px; }
        .section-header h2 { font-family: var(--font-title); font-size: 42px; color: var(--gold); font-weight: 700; margin-bottom: 10px; letter-spacing: -1px; }
        .section-header p { color: #666; font-size: 16px; max-width: 700px; margin: 0 auto; font-family: var(--font-body); }
        .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 30px; max-width: 1200px; margin: 0 auto; }
        .service-card { background-color: var(--black); border: 1px solid var(--gold); border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: all 0.4s ease; position: relative; display: flex; flex-direction: column; }
        .service-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(212, 175, 55, 0.3); border-color: var(--gold-hover); }
        .service-img { height: 220px; width: 100%; object-fit: cover; mask-image: linear-gradient(to bottom, black 70%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%); }
        .service-info { padding: 10px 30px 40px 30px; text-align: center; margin-top: -20px; position: relative; z-index: 2; }
        .service-icon { font-size: 40px; color: var(--gold); margin-bottom: 20px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .service-title { font-family: var(--font-title); font-size: 26px; color: var(--white); margin-bottom: 15px; font-weight: 700; }
        .service-desc { font-size: 14px; color: #cbd5e1; line-height: 1.6; font-weight: 400; font-family: var(--font-body); }

        /* SECCI√ìN FLOTA */
        .fleet-section { padding: 30px 20px 80px 20px; background-color: #fafafa; }
        .slider-container { position: relative; max-width: 800px; margin: 0 auto; overflow: hidden; padding-bottom: 40px; }
        .slider-track { display: flex; transition: transform 0.5s ease-in-out; width: 100%; }
        .slider-slide { min-width: 100%; box-sizing: border-box; padding: 10px; }
        .vehicle-card-clean { background: #fff; border-radius: 15px; overflow: hidden; box-shadow: 0 15px 30px rgba(0,0,0,0.08); display: flex; flex-direction: column; height: 100%; border: 1px solid #eee; }
        .image-container-clean { position: relative; width: 100%; }
        .vehicle-img-clean { width: 100%; height: 450px; object-fit: cover; border-bottom: 3px solid var(--gold); display: block; }
        .card-content-clean { padding: 30px; display: flex; flex-direction: column; flex-grow: 1; text-align: center; }
        .vehicle-name-clean { font-size: 2rem; color: var(--black); margin: 0 0 10px 0; font-weight: 600; font-family: var(--font-title); }
        .vehicle-desc-clean { font-size: 1.1rem; color: #666; line-height: 1.6; margin-bottom: 20px; flex-grow: 1; font-family: var(--font-body); }
        .vehicle-capacity-clean { display: inline-block; background: var(--light-gray); padding: 8px 20px; border-radius: 50px; font-size: 0.9rem; color: #555; font-weight: 600; margin-bottom: 25px; }
        .btn-reservar-clean { display: inline-block; background-color: var(--black); color: var(--white); padding: 15px 0; width: 100%; border-radius: 8px; text-transform: uppercase; font-size: 1rem; font-weight: 500; letter-spacing: 1px; transition: background 0.3s; text-decoration: none; cursor: pointer; border: none; font-family: var(--font-title); }
        .btn-reservar-clean:hover { background-color: var(--gold); }

        .slider-btn { position: absolute; top: 45%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.9); color: var(--black); border: none; width: 60px; height: 60px; border-radius: 50%; font-size: 24px; cursor: pointer; z-index: 10; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: 0.3s; display: flex; align-items: center; justify-content: center; }
        .slider-btn:hover { background: var(--black); color: var(--white); }
        .slider-btn.prev { left: 20px; }
        .slider-btn.next { right: 20px; }
        .slider-dots { display: flex; justify-content: center; gap: 10px; position: absolute; bottom: 0; left: 0; width: 100%; }
        .slider-dot { width: 12px; height: 12px; background: #ccc; border-radius: 50%; cursor: pointer; transition: 0.3s; border: none; padding: 0; }
        .slider-dot.active { background: var(--black); width: 30px; border-radius: 10px; }

        /* FOOTER */
        footer { background: var(--black); color: var(--white); padding: 40px 20px; text-align: center; font-size: 14px; border-top: 1px solid rgba(255,255,255,0.1); }

        /* MODALES */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0, 0, 0, 0.8); z-index: 20000; 
            display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); 
        }
        .modal-box { 
            background: white; width: 90%; max-width: 450px; 
            max-height: 90vh; 
            border-radius: 20px; text-align: center; 
            box-shadow: 0 25px 50px rgba(0,0,0,0.5); 
            display: flex; flex-direction: column; 
            overflow: hidden; 
            animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .modal-header-fixed {
            padding: 15px 20px; border-bottom: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: center;
            background: #fff; z-index: 10;
        }
        .modal-title-fixed { margin: 0; font-size: 18px; color: var(--primary-blue); font-weight: 800; font-family: var(--font-title); }
        
        .btn-close-fixed { 
            background: none; border: none; font-size: 14px; 
            color: #888; cursor: pointer; font-weight: 700; 
            font-family: var(--font-body); display: flex; align-items: center; gap: 5px;
        }
        .btn-close-fixed:hover { color: #333; }

        .modal-scrollable-content {
            padding: 20px; overflow-y: auto; 
            flex-grow: 1; 
            text-align: left;
        }

        .modal-icon { font-size: 60px; color: var(--action-green); margin: 10px 0; text-align: center; display: block; }
        .modal-main-title { font-size: 24px; color: var(--primary-blue); margin-bottom: 10px; font-weight: 900; text-align: center; font-family: var(--font-title); }
        .modal-text { font-size: 15px; color: #666; line-height: 1.6; margin-bottom: 20px; text-align: center; font-family: var(--font-body); }
        
        /* C√ìDIGO DE REFERENCIA BONITO */
        .codigo-reserva { 
            background-color: #ecfdf5; 
            border: 2px dashed #00a651; 
            color: #003580; 
            padding: 12px 20px; 
            font-size: 24px; 
            font-weight: 900; 
            letter-spacing: 3px; 
            border-radius: 12px; 
            margin: 10px auto 25px auto; 
            display: inline-block; 
            box-sizing: border-box; 
            font-family: var(--font-title);
            width: auto;
            max-width: 90%;
        }
        
        .modal-actions { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
        
        .modal-btn { 
            padding: 16px; border-radius: 10px; text-decoration: none; font-weight: 700; 
            display: flex; align-items: center; justify-content: center; gap: 15px; 
            color: white; font-size: 16px; transition: 0.2s; border: none; cursor: pointer; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); font-family: var(--font-body); width: 100%; box-sizing: border-box;
        }
        .modal-btn:hover { transform: translateY(-2px); opacity: 0.95; box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        
        .btn-call { background: var(--primary-blue); color: white; }
        .btn-wa { background: #25d366; color: white; font-size: 18px; }
        .btn-wa i { font-size: 24px; }
        .btn-mail { background: #333; color: white; }

        .tyc-content h4 { color: var(--primary-blue); margin-bottom: 5px; margin-top: 15px; font-size: 14px; }
        .tyc-content ul { padding-left: 20px; margin: 0; font-size: 13px; color: #444; }
        .tyc-content p { font-size: 13px; color: #444; }

        .loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.95); z-index: 20000; display: none; align-items: center; justify-content: center; flex-direction: column; }
        .spinner { width: 60px; height: 60px; border: 6px solid #f3f3f3; border-top: 6px solid var(--action-green); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px; }
        
        @keyframes slideUp { from {transform: translateY(50px); opacity: 0;} to {transform: translateY(0); opacity: 1;} }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Media Queries Generales */
        @media (max-width: 768px) { 
            .form-grid, .contact-section { grid-template-columns: 1fr; background: transparent; padding: 0; gap: 12px; border: none; } 
            .input-wrapper { border-radius: 10px !important; box-shadow: 0 2px 5px rgba(0,0,0,0.05); } 
            .direction-tabs { flex-direction: column; gap: 8px; } .tab-btn { justify-content: center; padding: 14px; } 
            .tarjeta { flex-direction: column; text-align: left; padding: 20px; gap: 15px; } 
            .tarjeta-img { width: 100%; height: 180px; flex: auto; border:none; padding:0; background: #f9f9f9; } 
            .tarjeta-price { border-left: none; padding-left: 0; border-top: 1px solid #eee; padding-top: 20px; text-align: left; flex-direction: row; align-items: center; justify-content: space-between; flex: auto; } 
            .btn-reservar { width: auto; padding: 12px 25px; margin-top: 0; }
            .vehicle-img-clean { height: 250px; } .slider-btn { width: 40px; height: 40px; font-size: 16px; top: 40%; } .vehicle-name-clean { font-size: 1.6rem; }
            .modal-box { width: 95%; max-height: 95vh; }
        }
    </style>
</head>
<body>

    <header>
        <div class="nav-container">
            <a href="#inicio" class="logo">
                <img src="https://i.imgur.com/lS3Crlx.png" alt="Icono Luxury" class="logo-icon">
                Luxury Transfers
            </a>
            <nav class="nav-links">
                <a href="#seccion-calculadora" class="nav-link" id="nav-cotizar">Cotizar</a>
                <a href="#servicios" class="nav-link" id="nav-servicios">Servicios</a>
                <a href="#flota" class="nav-link" id="nav-flota">Flota</a>
                <a href="javascript:void(0)" class="nav-link" onclick="toggleLanguage()" id="lang-btn"><i class="fas fa-globe"></i> English</a>
            </nav>
        </div>
    </header>

    <section id="inicio" class="hero">
        <div class="hero-content">
            <h1 id="hero-title">TU VIAJE EXCLUSIVO EN CANC√öN, LA RIVIERA MAYA Y TULUM</h1>
            <p id="hero-subtitle">Un viaje seguro y privado es el verdadero lujo que puedes dar a tu familia y amigos. Cotiza ahora y compru√©balo.</p>
            <a href="#seccion-calculadora" class="btn-cta" id="hero-btn">COTIZAR AHORA</a>
        </div>
    </section>

    <section id="seccion-calculadora">
        <div class="overlay" style="display:none;"></div> 
        <div class="main-container-calc">
            <h1 class="title-calc">
                <i class="fas fa-map-marker-alt"></i> <span id="calc-title">Reserva tu Transporte Privado</span>
                <span id="calc-subtitle">Cotiza y asegura tu traslado al instante</span>
            </h1>
            <div class="search-box-container">
                <div class="search-box-inner">
                    <div class="options-bar">
                        <div class="radio-group" id="radioTipoViaje">
                            <label class="radio-label"><input type="radio" name="tipoViaje" value="SENCILLO" checked onchange="updateTipoServicio('SENCILLO')"> <span id="label-sencillo">Solo Ida</span></label>
                            <label class="radio-label"><input type="radio" name="tipoViaje" value="REDONDO" onchange="updateTipoServicio('REDONDO')"> <span id="label-redondo">Ida y Vuelta</span></label>
                        </div>
                        <select id="tipoServicio" style="display:none;"><option value="SENCILLO">Sencillo</option><option value="REDONDO">Redondo</option></select>
                        <div style="width: 120px;">
                            <select id="moneda" onchange="limpiarResultados()" style="width:100%; padding: 10px; border-radius:8px; border:1px solid #ccc; font-weight:700; font-family:'Montserrat'; cursor:pointer; background:white; color:#333;">
                                <option value="USD" selected>USD ($)</option>
                                <option value="MXN">MXN ($)</option>
                            </select>
                        </div>
                    </div>
                    <div class="direction-tabs">
                        <div class="tab-btn active" id="btnDesdeAero" onclick="setDireccion('desdeAero')"><i class="fas fa-plane-arrival"></i> <span id="tab-desde">Desde Aeropuerto Canc√∫n</span></div>
                        <div class="tab-btn" id="btnHaciaAero" onclick="setDireccion('haciaAero')"><i class="fas fa-plane-departure"></i> <span id="tab-hacia">Hacia Aeropuerto Canc√∫n</span></div>
                        <div class="tab-btn" id="btnPersonalizado" onclick="setDireccion('personalizado')"><i class="fas fa-map-marked-alt"></i> <span id="tab-perso">Personalizado</span></div>
                    </div>

                    <div class="form-grid">
                        <div class="input-wrapper" id="divSubtipoServicio" style="display:none; grid-column: 1 / -1; background-color: #e3f2fd;">
                            <label id="label-tipo-especial" style="color: #003580;">Tipo de Servicio Especial:</label>
                            <select id="subtipoPersonalizado" onchange="ajustarCamposPersonalizados()">
                                <option value="HOTEL_A_HOTEL">üìç Traslado a Hotel / Airbnb</option>
                                <option value="TOUR">üé¢ Traslado a Tours (Parques/Ruinas)</option>
                                <option value="HORAS" id="optHoras">‚è≥ Servicio por Horas (Disposici√≥n)</option>
                            </select>
                        </div>

                        <div class="input-wrapper"><label id="labelOrigen">Recogida</label><input type="text" id="origen" value="Aeropuerto Internacional de Canc√∫n" readonly style="color:#777; background:#f5f5f5;"></div>
                        <input type="hidden" id="latitudDestino"><input type="hidden" id="longitudDestino">
                        <input type="hidden" id="latitudOrigen"><input type="hidden" id="longitudOrigen">
                        <input type="hidden" id="cpDestino"><input type="hidden" id="cpOrigen">

                        <div class="input-wrapper" id="divDestinoInput"><label id="labelDestino">Destino</label><input type="text" id="destino" placeholder="¬øA qu√© hotel vas?"></div>
                        <div class="input-wrapper" id="divHorasInput" style="display:none;">
                            <label>Duraci√≥n Requerida</label>
                            <select id="horasSeleccionadas">
                                <option value="2 Horas">2 Horas</option><option value="4 Horas">4 Horas</option><option value="6 Horas">6 Horas</option><option value="8 Horas">8 Horas</option><option value="Mas de 8 Horas">M√°s de 8 Horas</option>
                            </select>
                        </div>

                        <div class="input-wrapper" style="flex: 0.6;"><label id="label-fecha">Fecha</label><input type="date" id="fechaIda"></div>
                        
                        <div class="input-wrapper" style="flex: 0.4;">
                            <label id="label-hora">Hora</label>
                            <input type="time" id="horaIda" style="font-family: inherit; font-size: 15px; color:#333; font-weight:600;">
                        </div>

                        <div class="input-wrapper" id="divFechaVuelta" style="display:none; flex: 0.6;"><label id="label-fecha-vuelta">Fecha Vuelta</label><input type="date" id="fechaVuelta"></div>
                        
                        <div class="input-wrapper" id="divHoraVuelta" style="display:none; flex: 0.4;">
                            <label id="label-hora-vuelta">Hora</label>
                            <input type="time" id="horaVuelta" style="font-family: inherit; font-size: 15px; color:#333; font-weight:600;">
                        </div>

                        <div class="input-wrapper" style="flex: 0.4;">
                            <label id="label-pax">Pasajeros</label>
                            <select id="pasajeros">
                                <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option>
                            </select>
                        </div>

                        <div class="contact-section" id="seccionContacto">
                            <div class="input-wrapper" style="grid-column: 1 / -1;"><label style="color:var(--action-green); font-weight:900; font-size: 11px;" id="label-contact">TUS DATOS DE CONTACTO:</label></div>
                            <div class="input-wrapper"><label id="label-nombre">Nombre Completo</label><input type="text" id="nombreCliente" placeholder="Tu nombre"></div>
                            <div class="input-wrapper"><label id="label-tel">Tel√©fono</label><input type="tel" id="telefonoCliente" placeholder="Ej: +52 987 654 3210"></div>
                            <div class="input-wrapper"><label id="label-email">Correo Electr√≥nico</label><input type="email" id="emailCliente" placeholder="correo@ejemplo.com"></div>
                            <div id="divVueloInfo" class="flight-fields-container">
                                <div class="input-wrapper"><label id="label-aerolinea">Aerol√≠nea (Opcional)</label><input type="text" id="aerolinea" placeholder="Ej: Volaris"></div>
                                <div class="input-wrapper"><label id="label-vuelo">No. Vuelo (Opcional)</label><input type="text" id="numVuelo" placeholder="Ej: Y4 123"></div>
                            </div>
                            <div class="input-wrapper" id="divItinerario" style="grid-column: 1 / -1; display: none;">
                                <label style="color: #003580;">¬øQu√© lugares quieres visitar? / Itinerario</label>
                                <textarea id="itinerarioCliente" rows="2" placeholder="Ej: Ir a Tulum Ruinas, luego un cenote y terminar a comer en..."></textarea>
                            </div>
                            <div class="input-wrapper" style="grid-column: 1 / -1;">
                                <label id="label-notas">Notas / Equipaje / Sillas de Beb√©</label>
                                <textarea id="notasCliente" rows="2" placeholder="Ej: Llevamos 4 maletas grandes, necesitamos silla de beb√©..."></textarea>
                            </div>
                            <div class="terms-container">
                                <input type="checkbox" id="termsCheck">
                                <span id="label-terms">He le√≠do y acepto los <span class="terms-link" onclick="abrirTyC()">T√©rminos y Condiciones</span></span>
                            </div>
                        </div>

                        <button class="btn-cotizar" id="btnAccion" onclick="cotizar()">Buscar Precios</button>
                    </div>
                    <div id="contenedorVuelta" style="display:none;"></div> 
                </div>
                <div id="resultados"></div>
            </div>
        </div>
    </section>

    <section id="servicios" class="section-wrapper">
        <div class="section-header">
            <h2 id="servicios-title">Nuestros Servicios</h2>
            <p id="servicios-subtitle">Soluciones de transporte exclusivas dise√±adas para superar tus expectativas.</p>
        </div>
        <div class="services-grid">
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=600&h=400&fit=crop" class="service-img" alt="Airport">
                <div class="service-info">
                    <div class="service-icon"><i class="fas fa-plane-departure"></i></div>
                    <div class="service-title" id="serv-title-1">Aeropuerto</div>
                    <div class="service-desc" id="serv-desc-1">Transfer premium desde y hacia los aeropuertos de Canc√∫n, Tulum y M√©rida con monitoreo de vuelo.</div>
                </div>
            </div>
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=600&h=400&fit=crop" class="service-img" alt="Hotel">
                <div class="service-info">
                    <div class="service-icon"><i class="fas fa-building"></i></div>
                    <div class="service-title" id="serv-title-2">Hoteles</div>
                    <div class="service-desc" id="serv-desc-2">Traslados directos y exclusivos a cualquier hotel, resort o Airbnb en la Riviera Maya.</div>
                </div>
            </div>
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1518638150340-f706e86654de?w=600&h=400&fit=crop" class="service-img" alt="Tours">
                <div class="service-info">
                    <div class="service-icon"><i class="fas fa-globe-americas"></i></div>
                    <div class="service-title" id="serv-title-3">Tours</div>
                    <div class="service-desc" id="serv-desc-3">¬øQuieres visitar Chich√©n Itz√° o Xcaret? Te llevamos con un servicio privado y flexible.</div>
                </div>
            </div>
            <div class="service-card">
                <img src="https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=600&h=400&fit=crop" class="service-img" alt="Hourly">
                <div class="service-info">
                    <div class="service-icon"><i class="fas fa-clock"></i></div>
                    <div class="service-title" id="serv-title-4">Por Horas</div>
                    <div class="service-desc" id="serv-desc-4">Disponibilidad total del veh√≠culo y chofer por horas para eventos especiales, cenas o reuniones.</div>
                </div>
            </div>
        </div>
    </section>

    <section id="flota" class="fleet-section">
        <div class="section-header">
            <h2 id="flota-title">Nuestra Flota Premium</h2>
            <p id="flota-subtitle">Selecciona el veh√≠culo ideal para tu viaje</p>
        </div>
        <div class="slider-container">
            <div class="slider-track">
                <div class="slider-slide">
                    <div class="vehicle-card-clean">
                        <div class="image-container-clean"><img src="https://imgur.com/sVAYDET.jpg" alt="Sed√°n Ejecutivo" class="vehicle-img-clean"></div>
                        <div class="card-content-clean">
                            <h3 class="vehicle-name-clean" id="veh-title-1">Sed√°n Ejecutivo</h3>
                            <p class="vehicle-desc-clean" id="fleet-desc-1">Viaja ligero y con total comodidad. Ideal para parejas o viajeros de negocios que buscan un traslado privado y eficiente.</p>
                            <div><span class="vehicle-capacity-clean"><i class="fas fa-user"></i> 1-3 Pax</span></div>
                            <a href="#seccion-calculadora" class="btn-reservar-clean" id="btn-quote-1">Cotizar Ahora</a>
                        </div>
                    </div>
                </div>
                <div class="slider-slide">
                    <div class="vehicle-card-clean">
                        <div class="image-container-clean"><img src="https://imgur.com/3RPB7mA.jpg" alt="Luxury SUV" class="vehicle-img-clean"></div>
                        <div class="card-content-clean">
                            <h3 class="vehicle-name-clean" id="veh-title-2">Luxury SUV</h3>
                            <p class="vehicle-desc-clean" id="fleet-desc-2">Exclusividad y potencia desde tu llegada. El recibimiento perfecto en el aeropuerto para ejecutivos y familias VIP.</p>
                            <div><span class="vehicle-capacity-clean"><i class="fas fa-star"></i> 1-5 Pax</span></div>
                            <a href="#seccion-calculadora" class="btn-reservar-clean" id="btn-quote-2">Cotizar Ahora</a>
                        </div>
                    </div>
                </div>
                <div class="slider-slide">
                    <div class="vehicle-card-clean">
                        <div class="image-container-clean"><img src="https://imgur.com/QcQgVO9.jpg" alt="Van Ejecutiva" class="vehicle-img-clean"></div>
                        <div class="card-content-clean">
                            <h3 class="vehicle-name-clean" id="veh-title-3">Van Ejecutiva</h3>
                            <p class="vehicle-desc-clean" id="fleet-desc-3">Espacio inteligente y confort total. La opci√≥n ideal para familias o grupos de amigos que buscan viajar juntos con seguridad.</p>
                            <div><span class="vehicle-capacity-clean"><i class="fas fa-users"></i> 1-8 Pax</span></div>
                            <a href="#seccion-calculadora" class="btn-reservar-clean" id="btn-quote-3">Cotizar Ahora</a>
                        </div>
                    </div>
                </div>
                <div class="slider-slide">
                    <div class="vehicle-card-clean">
                        <div class="image-container-clean"><img src="https://imgur.com/3cMDA8m.jpg" alt="Sprinter" class="vehicle-img-clean"></div>
                        <div class="card-content-clean">
                            <h3 class="vehicle-name-clean" id="veh-title-4">Sprinter</h3>
                            <p class="vehicle-desc-clean" id="fleet-desc-4">Ideal para bodas, eventos o familias numerosas. Viajen todos juntos, seguros y con aire acondicionado de primera.</p>
                            <div><span class="vehicle-capacity-clean"><i class="fas fa-bus"></i> 1-15 Pax</span></div>
                            <a href="#seccion-calculadora" class="btn-reservar-clean" id="btn-quote-4">Cotizar Ahora</a>
                        </div>
                    </div>
                </div>
            </div>
            <button class="slider-btn prev"><i class="fas fa-chevron-left"></i></button>
            <button class="slider-btn next"><i class="fas fa-chevron-right"></i></button>
            <div class="slider-dots">
                <button class="slider-dot active"></button>
                <button class="slider-dot"></button>
                <button class="slider-dot"></button>
                <button class="slider-dot"></button>
            </div>
        </div>
    </section>

    <footer id="footer-text">&copy; 2026 Luxury Transfers Riviera. Todos los derechos reservados.</footer>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingTextDisplay" style="margin-top: 15px; font-weight: 700; color: #333; font-size: 14px;">GENERANDO RESERVA...</p>
    </div>

    <div class="modal-overlay" id="modalTyC">
        <div class="modal-box">
            <div class="modal-header-fixed">
                <h2 class="modal-title-fixed" id="tyc-title">T√©rminos y Condiciones</h2>
                <button class="btn-close-fixed" id="btn-close-tyc" onclick="cerrarTyC()">Cerrar <i class="fas fa-times"></i></button>
            </div>
            <div class="modal-scrollable-content">
                <div class="tyc-content" id="tyc-body">
                    </div>
                <button class="btn-reservar" onclick="cerrarTyC()" style="margin-top: 20px; width: 100%;" id="btn-accept-tyc">HE LE√çDO Y ACEPTO</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modalConfirmacion">
        <div class="modal-box">
            <div class="modal-header-fixed">
                <h2 class="modal-title-fixed" id="modalTitle">¬°Solicitud Recibida!</h2>
                <button class="btn-close-fixed" id="btn-close-confirm" onclick="cerrarModal()">Cerrar <i class="fas fa-times"></i></button>
            </div>
            <div class="modal-scrollable-content" style="text-align: center;">
                <div class="modal-icon"><i class="fas fa-check-circle"></i></div>
                <h2 class="modal-main-title" id="modalMainTitle">¬°Solicitud Recibida!</h2>
                
                <p style="margin:0; font-size:11px; color:#888; text-transform: uppercase; font-weight:700; letter-spacing: 1px;" id="modalCodeLabel">Tu c√≥digo de referencia es:</p>
                <div id="codigoDisplay" class="codigo-reserva">LTR-????</div>

                <p class="modal-text" id="modalText">Hemos recibido tu solicitud. Un asesor te contactar√° lo m√°s breve posible para finalizar tu reserva.</p>

                <div style="background-color: #fff4e5; border-left: 4px solid #ff9800; padding: 10px; margin-bottom: 20px; text-align: left; font-size: 13px; color: #663c00;">
                    <i class="fas fa-exclamation-triangle"></i> <strong id="modalWarningTitle">IMPORTANTE:</strong><br>
                    <span id="modalWarningText">Te hemos enviado un correo con los detalles de tu solicitud. <br>Por favor revisa tu carpeta de SPAM o "Correo no deseado".</span>
                </div>
                
                <div class="modal-actions">
                    <a href="tel:+529842411158" class="modal-btn btn-call" id="btn-modal-call"><i class="fas fa-phone"></i> Llama ahora</a>
                    <a href="#" target="_blank" class="modal-btn btn-wa" id="btnWhatsapp"><i class="fab fa-whatsapp"></i> Confirmar por WhatsApp</a>
                    <a href="#" class="modal-btn btn-mail" id="btnMail"><i class="fas fa-envelope"></i> Enviar Correo</a>
                </div>
            </div>
        </div>
    </div>

    <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyDldy9JHnkFpXZoqADLlRyAUNL9XJNP9IhsxmzltcySAUIZkcJ4wGZPKKeGolaVQYy/exec"; 

    let direccionMode = 'desdeAero'; 
    const imgUrlErtiga = "https://i.imgur.com/yoqbNJ7.png";
    const imgUrlTransporter = "https://i.imgur.com/8EOh4DB.png";
    const imgUrlSprinter = "https://i.imgur.com/BffyPRe.png";
    const imgUrlSuburban = "https://i.imgur.com/95X8eqt.png"; 

    function adjustScrollMargin() {
        const header = document.querySelector('header');
        if(header) {
            const height = header.offsetHeight;
            document.documentElement.style.setProperty('--header-height', height + 'px');
        }
    }
    window.addEventListener('load', adjustScrollMargin);
    window.addEventListener('resize', adjustScrollMargin);

    const airportNameES = "Aeropuerto Internacional de Canc√∫n";
    const airportNameEN = "Cancun International Airport";

    /* --- HELPER PARA OBTENER TEXTO PLANO DE T√âRMINOS Y CONDICIONES --- */
    function getTycPlainText(lang) {
        if (lang === 'en') {
            return `TERMS AND CONDITIONS

1. BOOKING PROCESS AND PAYMENTS
Booking Number: Upon completing your request on our website, the system will generate a booking number. This number is for tracking purposes only and does not guarantee service confirmation.
Official Confirmation: Service is formally confirmed, and the vehicle is blocked on our schedule only upon receipt of the 50% deposit and the issuance of our official confirmation.
Balance Payment: For services booked more than 72 hours in advance, the remaining balance must be paid 72 hours before the trip for digital payments. For last-minute bookings (less than 72 hours), digital payments require 100% payment at the time of booking. For cash payments, a 50% digital deposit is required as a guarantee, with the remaining balance paid to the driver upon boarding.

2. PRIVACY AND DATA PROTECTION
Confidentiality: Luxury Transfers Riviera commits to using your personal information (name, phone, email, and flight details) strictly for managing your transfer.
Security: Your data is handled with total discretion and will not be shared with third parties outside of our operations, guaranteeing the privacy of your itinerary at all times.

3. INSURANCE AND MEDICAL LIABILITY DISCLAIMER
Traveler Insurance: Our vehicles carry active Civil Liability Insurance as required by Mexican federal law for traffic accidents.
Exclusion: The company is exempt from liability for health complications or death resulting from natural causes or pre-existing medical conditions of the passenger.

4. CANCELLATION AND REFUND POLICIES
Cancellations > 24 hours: A refund of the deposited amount will be granted, minus non-refundable bank processing fees charged by the payment platform.
Cancellations < 24 hours or No-Show: No refunds or credits will apply.
Force Majeure: The company is not responsible for delays or missed flights due to external factors such as heavy traffic, third-party accidents, road blockades, or extreme weather.

5. WAITING TIMES AND TOLERANCE
Airport Arrivals: Maximum waiting time is 60 minutes after the actual flight landing. If there is no contact from the passenger after 61 minutes, the vehicle may depart and will be marked as a No-Show.
Hotel or Airbnb Pickups: Maximum tolerance is 20 minutes. After this time, the vehicle may depart to fulfill other scheduled services. Additional waiting time requested by the client may incur an extra charge, subject to availability.

6. LUGGAGE, VALUABLES, AND SUBSTANCES
Responsibility: Passengers are solely responsible for their belongings. We are not responsible for forgotten or lost items (jewelry, electronics, cash) or minor luggage damage from normal handling.
Illegal Substances: Transporting drugs or weapons is strictly prohibited. Non-compliance will result in immediate termination of service without a refund.

7. CLEANING FEES AND VEHICLE DAMAGE
Sanitation Fee: The client agrees to an automatic charge of $300 MXN ($17 USD) for deep cleaning in the event of vomiting, food/drink spills, or severe upholstery stains.
Physical Damage: Any intentional or accidental damage to the vehicle (screens, windows, seats) will be billed at the full cost of repair at an authorized shop.

8. VEHICLES AND CONDUCT
Visual Reference: Website images are illustrative. We guarantee the booked category, but the specific make, model, or color may vary. In the event of a technical issue, a support unit will be dispatched to guarantee your arrival at the destination.
Right of Admission: The driver may refuse service or interrupt the journey due to aggressive behavior or intoxication that jeopardizes the safety of the staff or the vehicle.`;
        } else {
            return `T√âRMINOS Y CONDICIONES

1. PROCESO DE RESERVACI√ìN Y PAGOS
N√∫mero de Reserva: Al completar su solicitud en nuestro sitio web, el sistema generar√° un n√∫mero de reserva. Este n√∫mero es √∫nicamente para seguimiento y no garantiza la confirmaci√≥n del servicio.
Confirmaci√≥n Oficial: El servicio se considerar√° formalmente confirmado y la unidad quedar√° bloqueada en agenda √∫nicamente tras la recepci√≥n del anticipo del 50% y el env√≠o de nuestra confirmaci√≥n oficial por parte de nuestro equipo.
Liquidaci√≥n: En servicios con m√°s de 72 horas de anticipaci√≥n, el saldo restante debe pagarse 72 horas antes del viaje para pagos digitales. En servicios de √∫ltima hora (menos de 72 horas), los pagos digitales requieren el 100% al reservar; en efectivo, se requiere el 50% de anticipo digital y el resto al abordar.

2. PRIVACIDAD Y PROTECCI√ìN DE DATOS
Confidencialidad: Luxury Transfers Riviera se compromete a utilizar su informaci√≥n personal (nombre, tel√©fono, correo y detalles de vuelo) estrictamente para la gesti√≥n de su traslado.
Seguridad: Sus datos son tratados con total discreci√≥n y no ser√°n compartidos con terceros ajenos a la operaci√≥n, garantizando la privacidad de su itinerario en todo momento.

3. SEGUROS Y DESLINDE DE RESPONSABILIDAD M√âDICA
Seguro de Viajero: Nuestras unidades cuentan con P√≥liza de Responsabilidad Civil vigente conforme a la ley federal mexicana por accidente de tr√°nsito.
Exclusi√≥n: La empresa queda exenta de responsabilidad en caso de complicaciones de salud o fallecimiento derivados de causas naturales o condiciones m√©dicas preexistentes del pasajero.

4. POL√çTICAS DE CANCELACI√ìN Y REEMBOLSOS
Cancelaci√≥n mayor a 24 horas: Se otorgar√° el reembolso del monto depositado, menos los cargos no reembolsables por procesamiento bancario que la plataforma de pago retenga.
Cancelaci√≥n menor a 24 horas o No-Show: No aplica reembolso ni cr√©dito.
Fuerza Mayor: No nos responsabilizamos por retrasos o p√©rdida de vuelos debidos a tr√°fico, accidentes de terceros, bloqueos viales o clima extremo.

5. TIEMPOS DE ESPERA Y TOLERANCIA
Aeropuerto: El tiempo m√°ximo de espera es de 60 minutos tras el aterrizaje. Al minuto 61 sin contacto, la unidad podr√° retirarse y se marcar√° como No-Show.
Hotel o Airbnb: La tolerancia es de 20 minutos. Tras este tiempo, la unidad podr√° retirarse. El tiempo extra solicitado por el cliente podr√≠a generar un cargo adicional sujeto a disponibilidad.

6. EQUIPAJE, OBJETOS DE VALOR Y SUSTANCIAS
Responsabilidad: El pasajero es el √∫nico responsable de sus pertenencias. No nos hacemos responsables por objetos olvidados o da√±os menores al equipaje por manejo normal.
Sustancias Il√≠citas: Prohibido el transporte de drogas o armas. El incumplimiento causar√° la interrupci√≥n inmediata del servicio sin reembolso.

7. CARGOS POR LIMPIEZA Y DA√ëOS
Multa por Higiene: El cliente acepta un cargo de 300 MXN (17 USD) por limpieza profunda en caso de v√≥mito, derrames de comida o manchas graves en la tapicer√≠a.
Da√±os F√≠sicos: Cualquier da√±o intencional o accidental a la unidad ser√° facturado al costo total de reparaci√≥n.

8. VEH√çCULOS Y CONDUCTA
Referencia Visual: Las im√°genes son ilustrativas. Se garantiza la categor√≠a contratada, pero el modelo o color pueden variar. Ante un imprevisto t√©cnico, se enviar√° una unidad de apoyo para garantizar su llegada al destino.
Derecho de Admisi√≥n: El chofer podr√° negar el servicio ante conductas agresivas o estado inconveniente de los pasajeros que ponga en riesgo la seguridad.`;
        }
    }

    // --- DICCIONARIO DE TRADUCCI√ìN ---
    const translations = {
        es: {
            navCotizar: "Cotizar", navServicios: "Servicios", navFlota: "Flota",
            heroTitle: "TU VIAJE EXCLUSIVO EN CANC√öN, LA RIVIERA MAYA Y TULUM",
            heroSubtitle: "Un viaje seguro y privado es el verdadero lujo que puedes dar a tu familia y amigos. Cotiza ahora y compru√©balo.",
            heroBtn: "COTIZAR AHORA",
            calcTitle: "Reserva tu Transporte Privado",
            calcSubtitle: "Cotiza y asegura tu traslado al instante",
            labelSencillo: "Solo Ida", labelRedondo: "Ida y Vuelta",
            tabDesde: "Desde Aeropuerto Canc√∫n", tabHacia: "Hacia Aeropuerto Canc√∫n", tabPerso: "Personalizado",
            labelDestino: "Destino", labelOrigen: "Recogida", labelFecha: "Fecha", labelHora: "Hora", labelPax: "Pasajeros",
            labelContact: "TUS DATOS DE CONTACTO:", labelNombre: "Nombre Completo", labelTel: "Tel√©fono",
            labelEmail: "Correo Electr√≥nico", 
            labelSpecialType: "Tipo de Servicio Especial:",
            optHotel: "üìç Traslado a Hotel / Airbnb",
            optTour: "üé¢ Traslado a Tours (Parques/Ruinas)",
            optHours: "‚è≥ Servicio por Horas (Disposici√≥n)",
            labelReturnDate: "Fecha Vuelta",
            labelReturnTime: "Hora",
            labelAerolinea: "Aerol√≠nea (Opcional)", labelVuelo: "No. Vuelo (Opcional)",
            labelNotas: "Notas / Equipaje / Sillas de Beb√©",
            labelTerms: 'He le√≠do y acepto los <span class="terms-link" onclick="abrirTyC()">T√©rminos y Condiciones</span>',
            btnAccion: "Buscar Precios",
            btnQuoteCustom: "Solicitar Cotizaci√≥n",
            serviciosTitle: "Nuestros Servicios",
            serviciosSubtitle: "Soluciones de transporte exclusivas dise√±adas para superar tus expectativas.",
            flotaTitle: "Nuestra Flota Premium",
            flotaSubtitle: "Selecciona el veh√≠culo ideal para tu viaje",
            servTitle1: "Aeropuerto", servDesc1: "Transfer premium desde y hacia los aeropuertos de Canc√∫n, Tulum y M√©rida con monitoreo de vuelo.",
            servTitle2: "Hoteles", servDesc2: "Traslados directos y exclusivos a cualquier hotel, resort o Airbnb en la Riviera Maya.",
            servTitle3: "Tours", servDesc3: "¬øQuieres visitar Chich√©n Itz√° o Xcaret? Te llevamos con un servicio privado y flexible.",
            servTitle4: "Por Horas", servDesc4: "Disponibilidad total del veh√≠culo y chofer por horas para eventos especiales, cenas o reuniones.",
            fleetDesc1: "Viaja ligero y con total comodidad. Ideal para parejas o viajeros de negocios que buscan un traslado privado y eficiente.",
            fleetDesc2: "Exclusividad y potencia desde tu llegada. El recibimiento perfecto en el aeropuerto para ejecutivos y familias VIP.",
            fleetDesc3: "Espacio inteligente y confort total. La opci√≥n ideal para familias o grupos de amigos que buscan viajar juntos con seguridad.",
            fleetDesc4: "Ideal para bodas, eventos o familias numerosas. Viajen todos juntos, seguros y con aire acondicionado de primera.",
            vehSedan: "Sed√°n Ejecutivo", vehVan: "Van Ejecutiva", vehSuv: "Luxury SUV", vehSprinter: "Sprinter",
            btnQuote: "Cotizar Ahora",
            placeholderName: "Tu nombre", placeholderPhone: "Ej: +52 987 654 3210", placeholderEmail: "correo@ejemplo.com",
            placeholderAirline: "Ej: Volaris", placeholderFlight: "Ej: Y4 123",
            placeholderItinerary: "Ej: Ir a Tulum Ruinas, luego un cenote y terminar a comer en...",
            placeholderNotes: "Ej: Llevamos 4 maletas grandes, necesitamos silla de beb√©...",
            footerText: "&copy; 2026 Luxury Transfers Riviera. Todos los derechos reservados.",
            resultsFor: "Resultados para",

            // MODALES Y TYC ESPA√ëOL
            tycTitle: "T√©rminos y Condiciones",
            btnClose: "Cerrar <i class='fas fa-times'></i>",
            tycContent: "", // Se llena din√°micamente con getTycPlainText
            btnAcceptTyc: "HE LE√çDO Y ACEPTO",
            
            loadingText: "GENERANDO RESERVA...",

            modalTitleReceived: "¬°Solicitud Recibida!",
            modalTitleSent: "¬°Solicitud Enviada!",
            modalTextReceived: "Hemos recibido tu solicitud. Un asesor te contactar√° lo m√°s breve posible para finalizar tu reserva.",
            modalTextSent: "Hemos recibido tu solicitud. Un asesor te contactar√° lo m√°s breve posible para darte un precio.",
            
            modalCodeLabel: "TU C√ìDIGO DE REFERENCIA ES:",
            modalWarningTitle: "IMPORTANTE:",
            modalWarningText: "Te hemos enviado un correo con los detalles de tu solicitud. <br>Por favor revisa tu carpeta de SPAM o \"Correo no deseado\".",
            btnModalCall: '<i class="fas fa-phone"></i> Llama ahora',
            btnModalWa: '<i class="fab fa-whatsapp"></i> Confirmar por WhatsApp',
            btnModalMail: '<i class="fas fa-envelope"></i> Enviar Correo',
            
            valSpecialQuote: "Cotizaci√≥n Especial",
            valToBeQuoted: "Por Cotizar",
            labelReturnEmail: "REGRESO",

            // NUEVOS CAMPOS: Traducci√≥n para mensajes de WhatsApp/Mail
            waGreetingConfirm: "Hola, quiero *CONFIRMAR* el siguiente servicio:",
            waGreetingQuote: "Hola, quiero *COTIZAR* el siguiente servicio:",
            waLabels: {
                code: "C√ìDIGO", type: "TIPO", veh: "VEH√çCULO", orig: "ORIGEN", dest: "DESTINO", 
                date: "FECHA", time: "HORA", pax: "PASAJEROS", price: "PRECIO WEB", name: "Mi Nombre"
            },

            cardFeatures: {
                monitor: "Monitoreo de Vuelo",
                ac: "Aire Acondicionado",
                insurance: "Seguro de Viajero",
                private: "100% Privado",
                noHidden: "Sin Cargos Ocultos",
                oneWay: "Solo Ida",
                roundTrip: "Ida y Vuelta",
                bookBtn: "RESERVAR"
            }
        },
        en: {
            navCotizar: "Quote", navServicios: "Services", navFlota: "Fleet",
            heroTitle: "YOUR EXCLUSIVE TRIP IN CANCUN, RIVIERA MAYA AND TULUM",
            heroSubtitle: "A safe and private trip is the true luxury you can give your family and friends. Quote now and see for yourself.",
            heroBtn: "QUOTE NOW",
            calcTitle: "Book your Private Transport",
            calcSubtitle: "Quote and secure your transfer instantly",
            labelSencillo: "One Way", labelRedondo: "Round Trip",
            tabDesde: "From Cancun Airport", tabHacia: "To Cancun Airport", tabPerso: "Custom",
            labelDestino: "Destination", labelOrigen: "Pick-up", labelFecha: "Date", labelHora: "Time", labelPax: "Passengers",
            labelContact: "YOUR CONTACT DETAILS:", labelNombre: "Full Name", labelTel: "Phone",
            labelEmail: "Email Address",
            labelSpecialType: "Special Service Type:",
            optHotel: "üìç Transfer to Hotel / Airbnb",
            optTour: "üé¢ Transfer to Tours (Parks/Ruins)",
            optHours: "‚è≥ Hourly Service (Disposal)",
            labelReturnDate: "Return Date",
            labelReturnTime: "Time",
            labelAerolinea: "Airline (Optional)", labelVuelo: "Flight No. (Optional)",
            labelNotas: "Notes / Luggage / Baby Seats",
            labelTerms: 'I have read and agree to the <span class="terms-link" onclick="abrirTyC()">Terms & Conditions</span>',
            btnAccion: "Search Prices",
            btnQuoteCustom: "Request Quote",
            serviciosTitle: "Our Services",
            serviciosSubtitle: "Exclusive transport solutions designed to exceed your expectations.",
            flotaTitle: "Our Premium Fleet",
            flotaSubtitle: "Select the ideal vehicle for your trip",
            servTitle1: "Airport", servDesc1: "Premium transfers to/from Cancun, Tulum, and Merida airports with flight monitoring.",
            servTitle2: "Hotels", servDesc2: "Direct and exclusive transfers to any hotel, resort, or Airbnb in the Riviera Maya.",
            servTitle3: "Tours", servDesc3: "Want to visit Chichen Itza or Xcaret? We take you with private and flexible service.",
            servTitle4: "Hourly", servDesc4: "Total vehicle and chauffeur availability by the hour for special events, dinners, or meetings.",
            fleetDesc1: "Travel light and in total comfort. Ideal for couples or business travelers seeking a private and efficient transfer.",
            fleetDesc2: "Exclusivity and power upon arrival. The perfect airport welcome for executives and VIP families.",
            fleetDesc3: "Smart space and total comfort. The ideal option for families or groups of friends looking to travel together safely.",
            fleetDesc4: "Ideal for weddings, events, or large families. Travel all together, safely, and with top-notch air conditioning.",
            vehSedan: "Executive Sedan", vehVan: "Executive Van", vehSuv: "Luxury SUV", vehSprinter: "Sprinter",
            btnQuote: "Quote Now",
            placeholderName: "Your Name", placeholderPhone: "Ex: +1 555 123 4567", placeholderEmail: "email@example.com",
            placeholderAirline: "Ex: Delta", placeholderFlight: "Ex: AA 123",
            placeholderItinerary: "Ex: Go to Tulum Ruins, then a cenote...",
            placeholderNotes: "Ex: We have 4 large suitcases...",
            footerText: "&copy; 2026 Luxury Transfers Riviera. All rights reserved.",
            resultsFor: "Results for",

            tycTitle: "Terms & Conditions",
            btnClose: "Close <i class='fas fa-times'></i>",
            tycContent: "", 
            btnAcceptTyc: "I HAVE READ AND AGREE",
            
            loadingText: "GENERATING BOOKING...",

            modalTitleReceived: "Request Received!",
            modalTitleSent: "Request Sent!",
            modalTextReceived: "We have received your request. An advisor will contact you shortly to finalize your reservation.",
            modalTextSent: "We have received your request. An advisor will contact you shortly with the price.",

            modalCodeLabel: "YOUR REFERENCE CODE IS:",
            modalWarningTitle: "IMPORTANT:",
            modalWarningText: "We sent you an email with the details. <br>Please check your SPAM folder.",
            btnModalCall: '<i class="fas fa-phone"></i> Call Now',
            btnModalWa: '<i class="fab fa-whatsapp"></i> Confirm via WhatsApp',
            btnModalMail: '<i class="fas fa-envelope"></i> Send Email',

            valSpecialQuote: "Special Quote",
            valToBeQuoted: "To Be Quoted",
            labelReturnEmail: "RETURN",

            // NUEVOS CAMPOS EN INGL√âS
            waGreetingConfirm: "Hello, I would like to *CONFIRM* the following service:",
            waGreetingQuote: "Hello, I would like to *REQUEST A QUOTE* for:",
            waLabels: {
                code: "CODE", type: "TYPE", veh: "VEHICLE", orig: "PICKUP", dest: "DESTINATION", 
                date: "DATE", time: "TIME", pax: "PASSENGERS", price: "WEB PRICE", name: "My Name"
            },

            cardFeatures: {
                monitor: "Flight Monitoring",
                ac: "Air Conditioning",
                insurance: "Travel Insurance",
                private: "100% Private",
                noHidden: "No Hidden Fees",
                oneWay: "One Way",
                roundTrip: "Round Trip",
                bookBtn: "BOOK NOW"
            }
        }
    };

    let currentLang = 'es'; 

    function toggleLanguage() {
        const newLang = currentLang === 'es' ? 'en' : 'es';
        setLang(newLang);
    }

    function setLang(lang) {
        currentLang = lang;
        const t = translations[lang];
        const btnText = lang === 'es' ? '<i class="fas fa-globe"></i> English' : '<i class="fas fa-globe"></i> Espa√±ol';
        document.getElementById('lang-btn').innerHTML = btnText;

        document.getElementById('nav-cotizar').innerText = t.navCotizar;
        document.getElementById('nav-servicios').innerText = t.navServicios;
        document.getElementById('nav-flota').innerText = t.navFlota;
        document.getElementById('hero-title').innerHTML = t.heroTitle;
        document.getElementById('hero-subtitle').innerText = t.heroSubtitle;
        document.getElementById('hero-btn').innerText = t.heroBtn;
        document.getElementById('calc-title').innerText = t.calcTitle;
        document.getElementById('calc-subtitle').innerText = t.calcSubtitle;
        document.getElementById('label-sencillo').innerText = t.labelSencillo;
        document.getElementById('label-redondo').innerText = t.labelRedondo;
        document.getElementById('tab-desde').innerText = t.tabDesde;
        document.getElementById('tab-hacia').innerText = t.tabHacia;
        document.getElementById('tab-perso').innerText = t.tabPerso;
        
        // TRADUCCION INPUT AEROPUERTO
        const origenInput = document.getElementById('origen');
        const destinoInput = document.getElementById('destino');
        const activeLangAirportName = lang === 'es' ? airportNameES : airportNameEN;

        if (direccionMode === 'desdeAero') {
            origenInput.value = activeLangAirportName;
            if(lang === 'en') destinoInput.placeholder = "Where are you going?";
            else destinoInput.placeholder = "¬øA qu√© hotel vas?";
        } else if (direccionMode === 'haciaAero') {
            destinoInput.value = activeLangAirportName;
            if(lang === 'en') origenInput.placeholder = "Pick-up Location";
            else origenInput.placeholder = "¬øD√≥nde te recogemos?";
        } else {
             if(lang === 'en') {
                origenInput.placeholder = "Pick-up Location";
                destinoInput.placeholder = "Destination";
            } else {
                origenInput.placeholder = "Lugar de Recogida";
                destinoInput.placeholder = "Lugar de Destino";
            }
        }

        document.getElementById('nombreCliente').placeholder = t.placeholderName;
        document.getElementById('telefonoCliente').placeholder = t.placeholderPhone;
        document.getElementById('emailCliente').placeholder = t.placeholderEmail;
        document.getElementById('aerolinea').placeholder = t.placeholderAirline;
        document.getElementById('numVuelo').placeholder = t.placeholderFlight;
        document.getElementById('itinerarioCliente').placeholder = t.placeholderItinerary;
        document.getElementById('notasCliente').placeholder = t.placeholderNotes;
        document.getElementById('footer-text').innerHTML = t.footerText;

        document.getElementById('labelDestino').innerText = t.labelDestino;
        document.getElementById('labelOrigen').innerText = t.labelOrigen;
        document.getElementById('label-fecha').innerText = t.labelFecha;
        document.getElementById('label-hora').innerText = t.labelHora;
        document.getElementById('label-pax').innerText = t.labelPax;
        document.getElementById('label-contact').innerText = t.labelContact;
        document.getElementById('label-nombre').innerText = t.labelNombre;
        document.getElementById('label-tel').innerText = t.labelTel;
        document.getElementById('label-email').innerText = t.labelEmail; 
        document.getElementById('label-tipo-especial').innerText = t.labelSpecialType; 
        
        // ACTUALIZAR SELECT OPCIONES
        const sel = document.getElementById('subtipoPersonalizado');
        sel.options[0].text = t.optHotel;
        sel.options[1].text = t.optTour;
        sel.options[2].text = t.optHours;

        document.getElementById('label-fecha-vuelta').innerText = t.labelReturnDate; 
        document.getElementById('label-hora-vuelta').innerText = t.labelReturnTime; 

        document.getElementById('label-aerolinea').innerText = t.labelAerolinea;
        document.getElementById('label-vuelo').innerText = t.labelVuelo;
        document.getElementById('label-notas').innerText = t.labelNotas;
        document.getElementById('label-terms').innerHTML = t.labelTerms;
        
        // L√ìGICA DE BOT√ìN DIN√ÅMICO
        if(direccionMode === 'personalizado') {
            document.getElementById('btnAccion').innerText = t.btnQuoteCustom;
        } else {
            document.getElementById('btnAccion').innerText = t.btnAccion;
        }

        document.getElementById('servicios-title').innerText = t.serviciosTitle;
        document.getElementById('servicios-subtitle').innerText = t.serviciosSubtitle;
        document.getElementById('flota-title').innerText = t.flotaTitle;
        document.getElementById('flota-subtitle').innerText = t.flotaSubtitle;

        document.getElementById('serv-title-1').innerText = t.servTitle1; document.getElementById('serv-desc-1').innerText = t.servDesc1;
        document.getElementById('serv-title-2').innerText = t.servTitle2; document.getElementById('serv-desc-2').innerText = t.servDesc2;
        document.getElementById('serv-title-3').innerText = t.servTitle3; document.getElementById('serv-desc-3').innerText = t.servDesc3;
        document.getElementById('serv-title-4').innerText = t.servTitle4; document.getElementById('serv-desc-4').innerText = t.servDesc4;

        document.getElementById('fleet-desc-1').innerText = t.fleetDesc1;
        document.getElementById('fleet-desc-2').innerText = t.fleetDesc2;
        document.getElementById('fleet-desc-3').innerText = t.fleetDesc3;
        document.getElementById('fleet-desc-4').innerText = t.fleetDesc4;
        
        document.getElementById('veh-title-1').innerText = t.vehSedan;
        document.getElementById('veh-title-2').innerText = t.vehSuv;
        document.getElementById('veh-title-3').innerText = t.vehVan;
        document.getElementById('veh-title-4').innerText = t.vehSprinter;
        
        document.getElementById('btn-quote-1').innerText = t.btnQuote;
        document.getElementById('btn-quote-2').innerText = t.btnQuote;
        document.getElementById('btn-quote-3').innerText = t.btnQuote;
        document.getElementById('btn-quote-4').innerText = t.btnQuote;

        // ACTUALIZACI√ìN DE TEXTOS EN MODALES Y BOTONES CERRAR
        document.getElementById('tyc-title').innerText = t.tycTitle;
        // Solo actualizar el contenido si tenemos el texto completo, usamos el helper
        document.getElementById('tyc-body').innerHTML = getTycPlainText(currentLang).replace(/\n/g, '<br>'); 

        document.getElementById('btn-accept-tyc').innerText = t.btnAcceptTyc;
        document.getElementById('btn-close-tyc').innerHTML = t.btnClose; 
        document.getElementById('btn-close-confirm').innerHTML = t.btnClose; 

        // CORRECCION 1: ACTUALIZAR TEXTO LOADING DIN√ÅMICO
        document.getElementById('loadingTextDisplay').innerText = t.loadingText;

        // CORRECCION 2: TEXTOS DEL MODAL DE CONFIRMACI√ìN (Usamos valores por defecto, luego se sobrescriben en iniciarEnvio)
        document.getElementById('modalCodeLabel').innerText = t.modalCodeLabel;
        document.getElementById('modalWarningTitle').innerText = t.modalWarningTitle;
        document.getElementById('modalWarningText').innerHTML = t.modalWarningText;
        
        document.getElementById('btn-modal-call').innerHTML = t.btnModalCall;
        document.getElementById('btnWhatsapp').innerHTML = t.btnModalWa;
        document.getElementById('btnMail').innerHTML = t.btnModalMail;
        
        // --- AUTO-UPDATE RESULTADOS ---
        if(document.getElementById('resultados').style.display === 'block') {
             cotizar(); 
        }
    }

    window.onload = function() {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('fechaIda').setAttribute('min', today);
        document.getElementById('fechaVuelta').setAttribute('min', today);
        document.getElementById('fechaIda').addEventListener('change', function() {
            document.getElementById('fechaVuelta').setAttribute('min', this.value);
        });
        
        setLang('en'); // INICIALIZAR EN INGLES
        initSlider();
        adjustScrollMargin();
    };

    function initSlider() {
        const track = document.querySelector('.slider-track');
        const slides = Array.from(document.querySelectorAll('.slider-slide'));
        const nextBtn = document.querySelector('.slider-btn.next');
        const prevBtn = document.querySelector('.slider-btn.prev');
        const dots = Array.from(document.querySelectorAll('.slider-dot'));
        let currentIndex = 0;

        function updateSlider() {
            const width = slides[0].getBoundingClientRect().width;
            track.style.transform = `translateX(-${width * currentIndex}px)`;
            dots.forEach(d => d.classList.remove('active'));
            dots[currentIndex].classList.add('active');
        }
        nextBtn.addEventListener('click', () => {
            if (currentIndex < slides.length - 1) { currentIndex++; updateSlider(); } else { currentIndex = 0; updateSlider(); }
        });
        prevBtn.addEventListener('click', () => {
            if (currentIndex > 0) { currentIndex--; updateSlider(); } else { currentIndex = slides.length - 1; updateSlider(); }
        });
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => { currentIndex = index; updateSlider(); });
        });
        window.addEventListener('resize', updateSlider);
    }

    function abrirTyC() { 
        document.getElementById('tyc-body').innerHTML = getTycPlainText(currentLang).replace(/\n/g, '<br>');
        document.getElementById('modalTyC').style.display = 'flex'; 
    }
    function cerrarTyC() { document.getElementById('modalTyC').style.display = 'none'; }

    function generarCodigo() {
        const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
        let result = 'LTR-';
        for (let i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
        return result;
    }

    function convertirHora12h(hora24) {
        if(!hora24) return "";
        let [h, m] = hora24.split(':');
        let hh = parseInt(h);
        let ampm = hh >= 12 ? 'PM' : 'AM';
        hh = hh % 12;
        hh = hh ? hh : 12; 
        return hh + ':' + m + ' ' + ampm;
    }

    // --- TARIFAS ---
    const tarifasSencilloMXN = { "ZONA HOTELERA DE TULUM": { standart: 2970, small: 6300, luxury: 5490 }, "CENTRO DE TULUM": { standart: 2520, small: 5400, luxury: 5400 }, "ZONA HOTELERA DE CANCUN": { standart: 720, small: 1800, luxury: 1512 }, "CENTRO DE CANCUN": { standart: 720, small: 1800, luxury: 1512 }, "COSTA MUJERES": { standart: 1440, small: 2700, luxury: 2610 }, "PLAYA MUJERES": { standart: 1170, small: 3338, luxury: 2340 }, "PUERTO JUAREZ": { standart: 990, small: 2520, luxury: 1980 }, "PLAYA PARAISO": { standart: 1170, small: 3338, luxury: 2340 }, "PUERTO MORELOS": { standart: 990, small: 2520, luxury: 1980 }, "PLAYA DEL CARMEN": { standart: 1440, small: 2700, luxury: 2610 }, "PUERTO AVENTURAS": { standart: 1710, small: 4050, luxury: 3060 }, "AKUMAL": { standart: 2070, small: 4860, luxury: 4230 }, "FELIPE CARRILLO PUERTO": { standart: 8100, small: 19386, luxury: 21870 }, "MAHAHUAL": { standart: 9900, small: 19386, luxury: 17820 }, "BACALAR": { standart: 9900, small: 19386, luxury: 17820 }, "CHETUMAL": { standart: 10000, small: 19386, luxury: 19000 }, "HOLBOX": { standart: 5760, small: 14400, luxury: 11160 }, "VALLADOLID": { standart: 5400, small: 11120, luxury: 15684 }, "MERIDA": { standart: 9900, small: 17820, luxury: 17820 } };
    const tarifasSencilloUSD = { "ZONA HOTELERA DE TULUM": { standart: 170, small: 360, luxury: 314 }, "CENTRO DE TULUM": { standart: 144, small: 309, luxury: 309 }, "ZONA HOTELERA DE CANCUN": { standart: 42, small: 103, luxury: 87 }, "CENTRO DE CANCUN": { standart: 42, small: 103, luxury: 87 }, "COSTA MUJERES": { standart: 83, small: 155, luxury: 150 }, "PLAYA MUJERES": { standart: 67, small: 191, luxury: 134 }, "PUERTO JUAREZ": { standart: 57, small: 144, luxury: 114 }, "PLAYA PARAISO": { standart: 67, small: 191, luxury: 134 }, "PUERTO MORELOS": { standart: 57, small: 144, luxury: 114 }, "PLAYA DEL CARMEN": { standart: 83, small: 155, luxury: 150 }, "PUERTO AVENTURAS": { standart: 98, small: 232, luxury: 175 }, "AKUMAL": { standart: 119, small: 278, luxury: 242 }, "FELIPE CARRILLO PUERTO": { standart: 463, small: 1108, luxury: 1250 }, "MAHAHUAL": { standart: 566, small: 1108, luxury: 1019 }, "BACALAR": { standart: 566, small: 1108, luxury: 1019 }, "CHETUMAL": { standart: 572, small: 1108, luxury: 1086 }, "HOLBOX": { standart: 330, small: 823, luxury: 638 }, "VALLADOLID": { standart: 309, small: 636, luxury: 897 }, "MERIDA": { standart: 566, small: 1019, luxury: 1019 } };
    const tarifasRedondoMXN = { "ZONA HOTELERA DE TULUM": { standart: 5940, small: 12600, luxury: 10980 }, "CENTRO DE TULUM": { standart: 5040, small: 10800, luxury: 10800 }, "ZONA HOTELERA DE CANCUN": { standart: 1440, small: 3600, luxury: 3024 }, "CENTRO DE CANCUN": { standart: 1440, small: 3600, luxury: 3024 }, "COSTA MUJERES": { standart: 2880, small: 5400, luxury: 5220 }, "PLAYA MUJERES": { standart: 2340, small: 6676, luxury: 4680 }, "PUERTO JUAREZ": { standart: 1980, small: 5040, luxury: 3960 }, "PLAYA PARAISO": { standart: 2340, small: 6676, luxury: 4680 }, "PUERTO MORELOS": { standart: 1980, small: 5040, luxury: 3960 }, "PLAYA DEL CARMEN": { standart: 2880, small: 5400, luxury: 5220 }, "PUERTO AVENTURAS": { standart: 3420, small: 8100, luxury: 6120 }, "AKUMAL": { standart: 4140, small: 9720, luxury: 8460 }, "FELIPE CARRILLO PUERTO": { standart: 16200, small: 38772, luxury: 43740 }, "MAHAHUAL": { standart: 19800, small: 38772, luxury: 35640 }, "BACALAR": { standart: 19800, small: 38772, luxury: 35640 }, "CHETUMAL": { standart: 20000, small: 38772, luxury: 38000 }, "HOLBOX": { standart: 11520, small: 28800, luxury: 22320 }, "VALLADOLID": { standart: 10800, small: 22240, luxury: 31368 }, "MERIDA": { standart: 19800, small: 35640, luxury: 35640 } };
    const tarifasRedondoUSD = { "ZONA HOTELERA DE TULUM": { standart: 340, small: 720, luxury: 628 }, "CENTRO DE TULUM": { standart: 288, small: 618, luxury: 618 }, "ZONA HOTELERA DE CANCUN": { standart: 83, small: 206, luxury: 173 }, "CENTRO DE CANCUN": { standart: 83, small: 206, luxury: 173 }, "COSTA MUJERES": { standart: 165, small: 309, luxury: 299 }, "PLAYA MUJERES": { standart: 134, small: 382, luxury: 268 }, "PUERTO JUAREZ": { standart: 114, small: 288, luxury: 227 }, "PLAYA PARAISO": { standart: 134, small: 382, luxury: 268 }, "PUERTO MORELOS": { standart: 114, small: 288, luxury: 227 }, "PLAYA DEL CARMEN": { standart: 165, small: 309, luxury: 299 }, "PUERTO AVENTURAS": { standart: 196, small: 463, luxury: 350 }, "AKUMAL": { standart: 237, small: 556, luxury: 484 }, "FELIPE CARRILLO PUERTO": { standart: 926, small: 2216, luxury: 2500 }, "MAHAHUAL": { standart: 1132, small: 2216, luxury: 2037 }, "BACALAR": { standart: 1132, small: 2216, luxury: 2037 }, "CHETUMAL": { standart: 1143, small: 2216, luxury: 2172 }, "HOLBOX": { standart: 659, small: 1646, luxury: 1276 }, "VALLADOLID": { standart: 618, small: 1271, luxury: 1793 }, "MERIDA": { standart: 1132, small: 2037, luxury: 2037 } };

    const diccionarioZonas = { "ZONA HOTELERA DE TULUM": ["TULUM HOTEL ZONE", "ZONA HOTELERA TULUM", "PAPAYA PLAYA", "NOMADE", "AZULIK", "ESTRELLITA", "LIBELULA", "CASA PHOENIX"], "CENTRO DE TULUM": ["TULUM DOWNTOWN", "CENTRO DE TULUM", "TULUM PUEBLO", "TULUM, Q.R.", "ZAMA", "VELETA"], "ZONA HOTELERA DE CANCUN": ["CANCUN HOTEL ZONE", "ZONA HOTELERA", "KUKULCAN", "HOTEL ZONE", "BOULEVARD KUKULCAN"], "CENTRO DE CANCUN": ["CANCUN DOWNTOWN", "CENTRO DE CANCUN", "CANCUN CENTRO", "SUPERMANZANA", "CANCUN, Q.R.", "ALAMOS", "HUAYACAN"], "COSTA MUJERES": ["COSTA MUJERES", "RIU DUNAMAR", "RIU PALACE COSTA", "PLANET HOLLYWOOD", "CATALONIA COSTA"], "PLAYA MUJERES": ["PLAYA MUJERES", "ATELIER", "FINEST", "BELOVED", "EXCELLENCE PLAYA"], "PUERTO MORELOS": ["PUERTO MORELOS", "DREAMS JADE", "NOW SAPPHIRE", "OCEAN CORAL", "MOON PALACE", "ROYALTON"], "PLAYA PARAISO": ["PLAYA PARAISO", "IBEROSTAR", "VIDANTA", "MAROMA"], "PLAYA DEL CARMEN": ["PLAYA DEL CARMEN", "XCARET", "FIFTH AVENUE", "QUINTA AVENIDA", "PLAYACAR"], "PUERTO AVENTURAS": ["PUERTO AVENTURAS", "DREAMS AVENTURAS", "DREAMS PUERTO", "HARD ROCK RIVIERA", "BARCELO", "UNICO", "CATALONIA ROYAL"], "AKUMAL": ["AKUMAL", "AKUMAL BAY", "BAHIA PRINCIPE", "SIRENIS", "PALLADIUM", "UNICO"], "MAHAHUAL": ["MAHAHUAL"], "BACALAR": ["BACALAR"], "CHETUMAL": ["CHETUMAL"], "HOLBOX": ["HOLBOX", "CHIQUILA"], "VALLADOLID": ["VALLADOLID"], "MERIDA": ["MERIDA"] };
    const zonasGPS = [ { nombre: "COSTA MUJERES", latMin: 21.2300, latMax: 21.3500, lonMin: -86.8500, lonMax: -86.7800 }, { nombre: "PLAYA MUJERES", latMin: 21.2000, latMax: 21.2290, lonMin: -86.8200, lonMax: -86.7800 }, { nombre: "PUERTO JUAREZ", latMin: 21.1650, latMax: 21.1990, lonMin: -86.8250, lonMax: -86.7900 }, { nombre: "ZONA HOTELERA DE CANCUN", latMin: 21.0000, latMax: 21.1200, lonMin: -86.8100, lonMax: -86.7500 }, { nombre: "ZONA HOTELERA DE CANCUN", latMin: 21.1200, latMax: 21.1500, lonMin: -86.8100, lonMax: -86.7200 }, { nombre: "PUERTO MORELOS", latMin: 20.9500, latMax: 21.0500, lonMin: -86.9500, lonMax: -86.8300 }, { nombre: "PUERTO MORELOS", latMin: 20.8200, latMax: 20.9500, lonMin: -87.0000, lonMax: -86.8000 }, { nombre: "PLAYA PARAISO", latMin: 20.7000, latMax: 20.8200, lonMin: -86.9900, lonMax: -86.9200 }, { nombre: "PLAYA DEL CARMEN", latMin: 20.5500, latMax: 20.7000, lonMin: -87.1500, lonMax: -87.0000 }, { nombre: "PUERTO AVENTURAS", latMin: 20.4500, latMax: 20.5500, lonMin: -87.3000, lonMax: -87.1500 }, { nombre: "AKUMAL", latMin: 20.3000, latMax: 20.4500, lonMin: -87.3500, lonMax: -87.2500 }, { nombre: "ZONA HOTELERA DE TULUM", latMin: 20.1215, latMax: 20.2200, lonMin: -87.4700, lonMax: -87.4000 }, { nombre: "CENTRO DE TULUM", latMin: 20.1800, latMax: 20.2400, lonMin: -87.5500, lonMax: -87.4701 }, { nombre: "CENTRO DE CANCUN", latMin: 21.1200, latMax: 21.1700, lonMin: -86.9500, lonMax: -86.8250 }, { nombre: "MERIDA", latMin: 20.8500, latMax: 21.1000, lonMin: -89.7500, lonMax: -89.5000 }, { nombre: "VALLADOLID", latMin: 20.6500, latMax: 20.7500, lonMin: -88.2500, lonMax: -88.1500 } ];
    const zonasCP = { "7750": "CENTRO DE CANCUN", "7751": "CENTRO DE CANCUN", "77520": "PUERTO JUAREZ", "77580": "PUERTO MORELOS", "77710": "PLAYA DEL CARMEN", "77712": "PLAYA DEL CARMEN", "77714": "PLAYA DEL CARMEN", "77733": "PUERTO AVENTURAS", "77776": "AKUMAL", "77760": "CENTRO DE TULUM", "77780": "CENTRO DE TULUM", "77310": "HOLBOX", "77930": "BACALAR", "770": "CHETUMAL", "970": "MERIDA", "971": "MERIDA", "972": "MERIDA", "973": "MERIDA", "9778": "VALLADOLID" };

    function detectarZonaPorGPS(lat, lng) {
        if (!lat || !lng) return null;
        for (let i = 0; i < zonasGPS.length; i++) {
            if (lat >= zonasGPS[i].latMin && lat <= zonasGPS[i].latMax && lng >= zonasGPS[i].lonMin && lng <= zonasGPS[i].lonMax) {
                return zonasGPS[i].nombre;
            }
        }
        return null;
    }

    function detectarZonaPorCP(cp) {
        if (!cp) return null;
        for (let codigo in zonasCP) {
            if (cp.startsWith(codigo) || cp.includes(codigo)) return zonasCP[codigo];
        }
        return null;
    }

    function setDireccion(modo) {
        direccionMode = modo;
        const origen = document.getElementById('origen');
        const destino = document.getElementById('destino');
        const btnAccion = document.getElementById('btnAccion');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        if(modo === 'desdeAero') document.getElementById('btnDesdeAero').classList.add('active');
        if(modo === 'haciaAero') document.getElementById('btnHaciaAero').classList.add('active');
        if(modo === 'personalizado') document.getElementById('btnPersonalizado').classList.add('active');
        document.getElementById('divSubtipoServicio').style.display = 'none';
        document.getElementById('radioTipoViaje').style.display = 'flex';
        document.getElementById('divVueloInfo').style.display = 'contents';
        document.getElementById('divDestinoInput').style.display = 'flex';
        document.getElementById('divHorasInput').style.display = 'none';
        document.getElementById('divItinerario').style.display = 'none';
        document.getElementById('resultados').style.display = 'none';
        const ro = "color:#777; background:#f5f5f5;";
        const ed = "color:var(--text-dark); background:transparent;";
        
        const activeLangAirportName = currentLang === 'es' ? airportNameES : airportNameEN;

        if (modo === 'desdeAero') {
            origen.value = activeLangAirportName; origen.setAttribute('readonly', true); origen.style.cssText = ro;
            destino.value = ""; destino.removeAttribute('readonly'); destino.style.cssText = ed; 
            destino.placeholder = currentLang === 'en' ? "Where are you going?" : "¬øA qu√© hotel vas?";
            btnAccion.innerText = translations[currentLang].btnAccion;
        } else if (modo === 'haciaAero') {
            destino.value = activeLangAirportName; destino.setAttribute('readonly', true); destino.style.cssText = ro;
            origen.value = ""; origen.removeAttribute('readonly'); origen.style.cssText = ed; 
            origen.placeholder = currentLang === 'en' ? "Pick-up Location" : "¬øD√≥nde te recogemos?";
            btnAccion.innerText = translations[currentLang].btnAccion;
        } else if (modo === 'personalizado') {
            document.getElementById('divSubtipoServicio').style.display = 'flex';
            document.getElementById('divVueloInfo').style.display = 'none';
            origen.value = ""; origen.removeAttribute('readonly'); origen.style.cssText = ed; 
            origen.placeholder = currentLang === 'en' ? "Pick-up Location" : "Lugar de Recogida";
            destino.value = ""; destino.removeAttribute('readonly'); destino.style.cssText = ed; 
            destino.placeholder = currentLang === 'en' ? "Destination" : "Lugar de Destino";
            btnAccion.innerText = translations[currentLang].btnQuoteCustom;
            updateTipoServicio(document.getElementById('tipoServicio').value);
            ajustarCamposPersonalizados();
        }
    }

    function updateTipoServicio(valor) {
        document.getElementById('tipoServicio').value = valor;
        const optHoras = document.getElementById('optHoras');
        if (direccionMode === 'personalizado') {
            if (valor === 'REDONDO') {
                optHoras.hidden = true; optHoras.disabled = true;
                if(document.getElementById('subtipoPersonalizado').value === 'HORAS') {
                    document.getElementById('subtipoPersonalizado').value = 'HOTEL_A_HOTEL';
                    ajustarCamposPersonalizados();
                }
            } else {
                optHoras.hidden = false; optHoras.disabled = false;
            }
        } else {
            optHoras.hidden = false; optHoras.disabled = false;
        }
        toggleVuelta();
    }

    function ajustarCamposPersonalizados() {
        if (direccionMode !== 'personalizado') return;
        const subtipo = document.getElementById('subtipoPersonalizado').value;
        const divDest = document.getElementById('divDestinoInput');
        const divHoras = document.getElementById('divHorasInput');
        const divItin = document.getElementById('divItinerario');
        if (subtipo === 'HORAS') {
            divDest.style.display = 'none'; divHoras.style.display = 'flex'; divItin.style.display = 'flex';
        } else {
            divDest.style.display = 'flex'; divHoras.style.display = 'none'; divItin.style.display = 'none';
            const ph = subtipo === 'TOUR' ? "Ej: Xcaret, Chich√©n Itz√°..." : "Ej: Hotel Xcaret, Airbnb...";
            document.getElementById('destino').placeholder = ph;
        }
    }

    function toggleVuelta() {
        const tipo = document.getElementById('tipoServicio').value;
        const show = (tipo === 'REDONDO') ? 'flex' : 'none';
        document.getElementById('divFechaVuelta').style.display = show;
        document.getElementById('divHoraVuelta').style.display = show;
        document.getElementById('resultados').style.display = 'none';
    }

    function limpiarResultados() { document.getElementById('resultados').style.display = 'none'; }

    function cotizar() {
        try {
            if(!document.getElementById('termsCheck').checked) { alert("‚ö†Ô∏è Debes leer y aceptar los T√©rminos y Condiciones para continuar."); return; }
            const email = document.getElementById('emailCliente').value;
            
            const rawHora = document.getElementById('horaIda').value;
            const fecha = document.getElementById('fechaIda').value;

            if(email.length < 5) { alert("‚ö†Ô∏è Por favor escribe tu correo electr√≥nico."); return; }
            if(!fecha) { alert("‚ö†Ô∏è Selecciona una fecha."); return; }
            if(!rawHora) { alert("‚ö†Ô∏è Selecciona la hora."); return; }

            const hora = convertirHora12h(rawHora); 

            const nombre = document.getElementById('nombreCliente').value;
            const tel = document.getElementById('telefonoCliente').value;
            if(nombre.length < 2) { alert("Escribe tu nombre."); return; }
            if(tel.length < 5) { alert("Escribe tu tel√©fono."); return; }
            
            // CORRECCION 3: Usamos el diccionario para los textos del correo
            const t = translations[currentLang];

            if (direccionMode === 'personalizado') {
                const subtipo = document.getElementById('subtipoPersonalizado').value;
                const subtipoTxt = document.getElementById('subtipoPersonalizado').options[document.getElementById('subtipoPersonalizado').selectedIndex].text;
                let destinoFinal = (subtipo === 'HORAS') ? document.getElementById('horasSeleccionadas').value : document.getElementById('destino').value;
                
                if(!document.getElementById('origen').value) { alert("‚ö†Ô∏è En servicio personalizado, debes indicar el Lugar de Recogida."); return; }
                if(subtipo !== 'HORAS' && !document.getElementById('destino').value) { alert("‚ö†Ô∏è En servicio personalizado, debes indicar el Lugar de Destino."); return; }
                
                let fechaVueltaVal = "";
                let horaVueltaVal = "";
                if(document.getElementById('tipoServicio').value === 'REDONDO') {
                      fechaVueltaVal = document.getElementById('fechaVuelta').value;
                      if(!fechaVueltaVal) { alert("‚ö†Ô∏è Has seleccionado Ida y Vuelta. Por favor indica la fecha de vuelta."); return; }
                      
                      const rawHoraVuelta = document.getElementById('horaVuelta').value;
                      if(!rawHoraVuelta) { alert("‚ö†Ô∏è Por favor indica la hora de vuelta."); return; }
                      horaVueltaVal = convertirHora12h(rawHoraVuelta);
                }

                const codigoUnico = generarCodigo();
                // CORRECCION 3: Etiqueta de regreso traducida
                let notasFinales = document.getElementById('notasCliente').value;
                if(horaVueltaVal) {
                    notasFinales += ` // ${t.labelReturnEmail}: ${fechaVueltaVal} a las ${horaVueltaVal}`;
                }

                const datosCotizacion = { esVenta: false, codigo: codigoUnico, nombre: nombre, telefono: tel, email: email, tipoViaje: document.getElementById('tipoServicio').value + " - " + subtipoTxt, origen: document.getElementById('origen').value, destino: destinoFinal, fecha: fecha, hora: hora, notas: notasFinales, itinerario: document.getElementById('itinerarioCliente').value, vehiculo: t.valSpecialQuote, precio: t.valToBeQuoted, idioma: currentLang };
                document.getElementById('codigoDisplay').innerText = codigoUnico;
                iniciarEnvio(datosCotizacion);
                return;
            }

            const tipo = document.getElementById('tipoServicio').value;
            
            if (tipo === 'REDONDO') {
                const fVuelta = document.getElementById('fechaVuelta').value;
                const hVuelta = document.getElementById('horaVuelta').value;
                if (!fVuelta) { alert("‚ö†Ô∏è Para el viaje Redondo, por favor selecciona la Fecha de Vuelta."); return; }
                if (!hVuelta) { alert("‚ö†Ô∏è Para el viaje Redondo, por favor selecciona la Hora de Vuelta."); return; }
            }

            const moneda = document.getElementById('moneda').value;
            const pax = parseInt(document.getElementById('pasajeros').value);
            let lugarBusqueda = ""; let latBusqueda = 0; let lonBusqueda = 0; let cpBusqueda = "";

            if (direccionMode === 'desdeAero') {
                lugarBusqueda = document.getElementById('destino').value;
                latBusqueda = parseFloat(document.getElementById('latitudDestino').value);
                lonBusqueda = parseFloat(document.getElementById('longitudDestino').value);
                cpBusqueda = document.getElementById('cpDestino').value;
            } else {
                lugarBusqueda = document.getElementById('origen').value;
                latBusqueda = parseFloat(document.getElementById('latitudOrigen').value);
                lonBusqueda = parseFloat(document.getElementById('longitudOrigen').value);
                cpBusqueda = document.getElementById('cpOrigen').value;
            }
            
            if (lugarBusqueda.length < 3) { alert("Indica el lugar."); return; }
            let zonaDetectada = "";
            if (!isNaN(latBusqueda) && !isNaN(lonBusqueda)) {
                if (latBusqueda < 20.1215 && latBusqueda > 19.0 && lonBusqueda > -87.6) { alert("üìç Zona de Terracer√≠a / Sian Ka'an detectada (Sur de Estrellita).\nPor las condiciones del camino, esta zona requiere cotizaci√≥n especial.\n\nPor favor usa el bot√≥n 'Servicio Personalizado'."); return; }
                zonaDetectada = detectarZonaPorGPS(latBusqueda, lonBusqueda);
            }
            if (!zonaDetectada && cpBusqueda) { zonaDetectada = detectarZonaPorCP(cpBusqueda); }
            if (!zonaDetectada) {
                lugarBusqueda = lugarBusqueda.toUpperCase();
                for (let z in diccionarioZonas) {
                    for (let i=0; i<diccionarioZonas[z].length; i++) {
                        if (lugarBusqueda.includes(diccionarioZonas[z][i])) { zonaDetectada = z; break; }
                    }
                    if(zonaDetectada) break;
                }
            }
            if (!zonaDetectada) { 
                alert("‚ö†Ô∏è Lo sentimos, no pudimos detectar autom√°ticamente la zona o ubicaci√≥n.\n\nEsto puede deberse a que el autocompletado de Google Maps no carg√≥ correctamente (Falta API Key v√°lida) o la direcci√≥n escrita no est√° en nuestra lista exacta.\n\nPor favor intenta seleccionar 'Personalizado' para enviar una solicitud manual."); 
                return; 
            }

            let db;
            if (moneda === 'MXN' && tipo === 'SENCILLO') db = tarifasSencilloMXN;
            else if (moneda === 'USD' && tipo === 'SENCILLO') db = tarifasSencilloUSD;
            else if (moneda === 'MXN' && tipo === 'REDONDO') db = tarifasRedondoMXN;
            else if (moneda === 'USD' && tipo === 'REDONDO') db = tarifasRedondoUSD;

            const p = db[zonaDetectada];
            if (!p) {
                 alert("Error interno: Zona detectada pero sin tarifa asignada. Contacta soporte.");
                 return;
            }

            const divRes = document.getElementById('resultados');
            divRes.innerHTML = "";
            
            let rutaLabel = "";
            let aeroName = currentLang === 'en' ? airportNameEN : "Aeropuerto Canc√∫n";

            if(direccionMode === 'desdeAero') rutaLabel = `${aeroName} <i class='fas fa-arrow-right'></i> ${document.getElementById('destino').value}`;
            else rutaLabel = `${document.getElementById('origen').value} <i class='fas fa-arrow-right'></i> ${aeroName}`;
            
            divRes.innerHTML = `<div class="ruta-header">${t.resultsFor}: ${rutaLabel}</div>`;

            let cap15 = currentLang === 'en' ? "Up to 15 Pax" : "Hasta 15 Pax";

            if(pax<=3) divRes.innerHTML+=crearCard("STANDARD SEDAN","1-3 Pax",p.standart,moneda,zonaDetectada,imgUrlErtiga, rutaLabel);
            else if(pax<=8) divRes.innerHTML+=crearCard("VAN STANDARD","1-8 Pax",p.standart,moneda,zonaDetectada,imgUrlTransporter, rutaLabel);
            if(pax<=15 && p.small) divRes.innerHTML+=crearCard("SMALL GROUP VAN", cap15, p.small,moneda,zonaDetectada,imgUrlSprinter, rutaLabel);
            if(pax<=5 && p.luxury) divRes.innerHTML+=crearCard("LUXURY SUV","1-5 Pax",p.luxury,moneda,zonaDetectada,imgUrlSuburban, rutaLabel);
            divRes.style.display = 'block';
            divRes.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } catch (error) {
            console.error(error);
            alert("Ocurri√≥ un error al procesar la cotizaci√≥n. \n\nPosible causa: La API Key de Google Maps no es v√°lida o faltan datos.\n\nDetalle t√©cnico: " + error.message);
        }
    }

    function crearCard(veh, cap, precio, moneda, zona, img, rutaLabel) {
        const t = translations[currentLang].cardFeatures;
        const tipo = document.getElementById('tipoServicio').value;
        const pAlto = Math.round(precio * 1.30);
        const dataObj = JSON.stringify({ esVenta: true, vehiculo: veh, precio: "$" + precio + " " + moneda, zona: zona }).replace(/"/g, "&quot;");
        let tipoTexto = (tipo === 'SENCILLO') ? t.oneWay : t.roundTrip;
        let iconoTipo = (tipo === 'SENCILLO') ? "fa-arrow-right" : "fa-exchange-alt";
        
        return `
        <div class="tarjeta">
            <div class="tarjeta-img"><img src="${img}" alt="${veh}"></div>
            <div class="tarjeta-info">
                <h3>${veh}</h3>
                <div class="tarjeta-route-display">${rutaLabel}</div>
                <div class="tarjeta-specs">
                    <div class="spec-row"><i class="fas fa-user-friends"></i> <span>${cap}</span></div>
                    <div class="spec-row"><i class="fas ${iconoTipo}"></i> <span>${tipoTexto}</span></div>
                </div>
                <div class="feature-grid">
                    <div class="feature-tag"><i class="fas fa-plane-arrival"></i> ${t.monitor}</div>
                    <div class="feature-tag"><i class="fas fa-snowflake"></i> ${t.ac}</div>
                    <div class="feature-tag"><i class="fas fa-shield-alt"></i> ${t.insurance}</div>
                    <div class="feature-tag"><i class="fas fa-car"></i> ${t.private}</div>
                    <div class="feature-tag"><i class="fas fa-ban"></i> ${t.noHidden}</div>
                </div>
            </div>
            <div class="tarjeta-price">
                <div class="price-container">
                    <span class="price-old">$${pAlto}</span>
                    <span class="price-current">$${precio} <small style="font-size:0.5em; font-weight:600;">${moneda}</small></span>
                </div>
                <button class="btn-reservar" onclick="prepararVenta(${dataObj})">${t.bookBtn} <i class="fas fa-arrow-right"></i></button>
            </div>
        </div>`;
    }

    function prepararVenta(datosCard) {
        const codigoUnico = generarCodigo();
        
        const rawHora = document.getElementById('horaIda').value;
        const horaIda = convertirHora12h(rawHora);
        const t = translations[currentLang];

        let notasFinales = document.getElementById('notasCliente').value;
        
        if(document.getElementById('tipoServicio').value === 'REDONDO') {
             const rawHoraVuelta = document.getElementById('horaVuelta').value;
             const horaVuelta = convertirHora12h(rawHoraVuelta);
             const fechaVuelta = document.getElementById('fechaVuelta').value;
             if(fechaVuelta) {
                 // CORRECCION 3: Etiqueta de regreso traducida
                 notasFinales += ` // ${t.labelReturnEmail}: ${fechaVuelta} a las ${horaVuelta}`;
             }
        }

        const datosVenta = {
            esVenta: true,
            codigo: codigoUnico,
            nombre: document.getElementById('nombreCliente').value,
            telefono: document.getElementById('telefonoCliente').value,
            email: document.getElementById('emailCliente').value,
            tipoViaje: document.getElementById('tipoServicio').value,
            origen: document.getElementById('origen').value,
            destino: document.getElementById('destino').value,
            fecha: document.getElementById('fechaIda').value,
            hora: horaIda,
            notas: notasFinales,
            vuelo: document.getElementById('aerolinea').value + ' ' + document.getElementById('numVuelo').value,
            vehiculo: datosCard.vehiculo,
            precio: datosCard.precio,
            zona: datosCard.zona,
            idioma: currentLang
        };
        document.getElementById('codigoDisplay').innerText = codigoUnico;
        iniciarEnvio(datosVenta);
    }

    function iniciarEnvio(data) {
        if(SCRIPT_URL.includes("PEGAR")) { alert("Falta configurar la URL del Script."); return; }
        document.getElementById('loadingOverlay').style.display = 'flex';
        
        // CORRECCI√ìN FINAL: Usar traducciones din√°micas para el mensaje de WhatsApp/Mail
        const t = translations[currentLang]; // Usar el idioma actual seleccionado
        const l = t.waLabels; // Alias para escribir menos
        
        let saludo = data.esVenta ? t.waGreetingConfirm : t.waGreetingQuote;
        
        // Construcci√≥n del mensaje usando etiquetas traducidas
        let baseText = `${saludo}%0A%0A*${l.code}:* ${data.codigo}%0A*${l.type}:* ${data.tipoViaje}%0A*${l.veh}:* ${data.vehiculo}%0A*${l.orig}:* ${data.origen}%0A*${l.dest}:* ${data.destino}%0A*${l.date}:* ${data.fecha} - *${l.time}:* ${data.hora}%0A*${l.pax}:* ${document.getElementById('pasajeros').value}`;
        
        if(data.precio && data.precio !== t.valToBeQuoted) { baseText += `%0A*${l.price}:* ${data.precio}`; }
        
        baseText += `%0A%0A*${l.name}:* ${data.nombre}`;
        
        const subject = encodeURIComponent("Solicitud " + data.codigo + " - " + data.nombre);
        const mailBody = encodeURIComponent(baseText.replace(/%0A/g, "\n").replace(/\*/g, "")); 
        
        let tyc = getTycPlainText(currentLang);
        data.terminos = tyc; 
        
        const mailBodyConTyc = encodeURIComponent((baseText + "\n\n------------------------\n" + tyc).replace(/%0A/g, "\n").replace(/\*/g, ""));

        document.getElementById('btnWhatsapp').href = `https://wa.me/529842411158?text=${baseText}`; 
        document.getElementById('btnMail').href = `mailto:reservas@luxurytransfersriviera.com.mx?subject=${subject}&body=${mailBodyConTyc}`; 

        fetch(SCRIPT_URL, {
            method: 'POST', mode: 'no-cors', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data)
        })
        .then(() => {
            document.getElementById('loadingOverlay').style.display = 'none';
            //const t = translations[currentLang]; // Ya definida arriba
            
            if(data.esVenta) {
                document.getElementById('modalTitle').innerText = t.modalTitleReceived;
                document.getElementById('modalMainTitle').innerText = t.modalTitleReceived;
                document.getElementById('modalText').innerText = t.modalTextReceived;
            } else {
                document.getElementById('modalTitle').innerText = t.modalTitleSent;
                document.getElementById('modalMainTitle').innerText = t.modalTitleSent;
                document.getElementById('modalText').innerHTML = t.modalTextSent;
            }
            document.getElementById('modalConfirmacion').style.display = 'flex';
        })
        .catch(e => {
            console.error(e);
            alert("Error al enviar. Intenta por WhatsApp.");
            document.getElementById('loadingOverlay').style.display = 'none';
        });
    }

    function cerrarModal() { document.getElementById('modalConfirmacion').style.display = 'none'; }
    
    function initAutocomplete() {
        const bounds = new google.maps.LatLngBounds(new google.maps.LatLng(17.9, -91.5), new google.maps.LatLng(21.8, -86.5));
        const opts = { bounds: bounds, strictBounds: true, componentRestrictions: { country: "mx" }, fields: ["name", "geometry", "address_components"], types: ["establishment", "geocode"] };
        const autoOrigen = new google.maps.places.Autocomplete(document.getElementById('origen'), opts);
        const autoDestino = new google.maps.places.Autocomplete(document.getElementById('destino'), opts);
        function extraerDatos(place, tipo) {
            if (place.geometry) {
                document.getElementById('latitud' + tipo).value = place.geometry.location.lat();
                document.getElementById('longitud' + tipo).value = place.geometry.location.lng();
            }
            let cpEncontrado = "";
            if (place.address_components) {
                for (let i = 0; i < place.address_components.length; i++) {
                    const types = place.address_components[i].types;
                    if (types.includes("postal_code")) { cpEncontrado = place.address_components[i].long_name; break; }
                }
            }
            document.getElementById('cp' + tipo).value = cpEncontrado;
        }
        autoOrigen.addListener('place_changed', function() { extraerDatos(autoOrigen.getPlace(), "Origen"); });
        autoDestino.addListener('place_changed', function() { extraerDatos(autoDestino.getPlace(), "Destino"); });
    }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdK5yLQ20SQrLc_0rOuo7oxxHVQ233Bh0&libraries=places&callback=initAutocomplete" async defer></script>
</body>
</html>
